(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const nl="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(nl);let sr=!1,rl=!1;function sl(){sr=!0}sl();const il=1,al=2,Oi=4,ll=8,ol=16,cl=1,ul=2,ue=Symbol(),Pi="http://www.w3.org/1999/xhtml",Jr=!1;var gs=Array.isArray,fl=Array.prototype.indexOf,mn=Array.prototype.includes,Nr=Array.from,$i=Object.defineProperty,Zn=Object.getOwnPropertyDescriptor,zi=Object.getOwnPropertyDescriptors,dl=Object.prototype,pl=Array.prototype,_s=Object.getPrototypeOf,Ks=Object.isExtensible;const bt=()=>{};function hl(e){return e()}function Tr(e){for(var t=0;t<e.length;t++)e[t]()}function Fi(){var e,t,n=new Promise((s,r)=>{e=s,t=r});return{promise:n,resolve:e,reject:t}}const fe=2,er=4,ir=8,Bi=1<<24,wt=16,Ke=32,sn=64,es=128,Oe=512,le=1024,de=2048,$e=4096,De=8192,Mt=16384,ar=32768,kn=65536,Js=1<<17,qi=1<<18,Tn=1<<19,Ui=1<<20,_t=1<<25,Kt=65536,ts=1<<21,bs=1<<22,Dt=1<<23,It=Symbol("$state"),jt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ms(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function vl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function gl(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function _l(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function bl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ml(e){throw new Error("https://svelte.dev/e/effect_orphan")}function kl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function wl(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function xl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function yl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Tl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Sl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function El(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Al(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Hi(e){return e===this.v}function Wi(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Gi(e){return!Wi(e,this.v)}let V=null;function wn(e){V=e}function st(e,t=!1,n){V={p:V,i:!1,c:null,e:null,s:e,x:null,l:sr&&!t?{s:null,u:null,$:[]}:null}}function it(e){var t=V,n=t.e;if(n!==null){t.e=null;for(var s of n)fa(s)}return t.i=!0,V=t.p,{}}function Sn(){return!sr||V!==null&&V.l===null}let Vt=[];function ji(){var e=Vt;Vt=[],Tr(e)}function mt(e){if(Vt.length===0&&!Xn){var t=Vt;queueMicrotask(()=>{t===Vt&&ji()})}Vt.push(e)}function Rl(){for(;Vt.length>0;)ji()}function Vi(e){var t=F;if(t===null)return I.f|=Dt,e;if((t.f&ar)===0&&(t.f&er)===0)throw e;xn(e,t)}function xn(e,t){for(;t!==null;){if((t.f&es)!==0){if((t.f&ar)===0)throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const Cl=-7169;function ee(e,t){e.f=e.f&Cl|t}function ks(e){(e.f&Oe)!==0||e.deps===null?ee(e,le):ee(e,$e)}function Yi(e){if(e!==null)for(const t of e)(t.f&fe)===0||(t.f&Kt)===0||(t.f^=Kt,Yi(t.deps))}function Zi(e,t,n){(e.f&de)!==0?t.add(e):(e.f&$e)!==0&&n.add(e),Yi(e.deps),ee(e,le)}const vr=new Set;let z=null,Sr=null,Ye=null,Ae=[],Mr=null,ns=!1,Xn=!1;class Lt{committed=!1;current=new Map;previous=new Map;#t=new Set;#l=new Set;#e=0;#s=0;#i=null;#a=new Set;#n=new Set;#r=new Map;is_fork=!1;#o=!1;is_deferred(){return this.is_fork||this.#s>0}skip_effect(t){this.#r.has(t)||this.#r.set(t,{d:[],m:[]})}unskip_effect(t){var n=this.#r.get(t);if(n){this.#r.delete(t);for(var s of n.d)ee(s,de),Ze(s);for(s of n.m)ee(s,$e),Ze(s)}}process(t){Ae=[],this.apply();var n=[],s=[];for(const r of t)this.#u(r,n,s);if(this.is_deferred()){this.#c(s),this.#c(n);for(const[r,i]of this.#r)Ji(r,i)}else{for(const r of this.#t)r();this.#t.clear(),this.#e===0&&this.#d(),Sr=this,z=null,ei(s),ei(n),Sr=null,this.#i?.resolve()}Ye=null}#u(t,n,s){t.f^=le;for(var r=t.first,i=null;r!==null;){var a=r.f,o=(a&(Ke|sn))!==0,l=o&&(a&le)!==0,c=l||(a&De)!==0||this.#r.has(r);if(!c&&r.fn!==null){o?r.f^=le:i!==null&&(a&(er|ir|Bi))!==0?i.b.defer_effect(r):(a&er)!==0?n.push(r):An(r)&&((a&wt)!==0&&this.#n.add(r),nn(r));var f=r.first;if(f!==null){r=f;continue}}for(;r!==null;){r===i&&(i=null);var p=r.next;if(p!==null){r=p;break}r=r.parent}}}#c(t){for(var n=0;n<t.length;n+=1)Zi(t[n],this.#a,this.#n)}capture(t,n){n!==ue&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&Dt)===0&&(this.current.set(t,t.v),Ye?.set(t,t.v))}activate(){z=this,this.apply()}deactivate(){z===this&&(z=null,Ye=null)}flush(){if(this.activate(),Ae.length>0){if(Xi(),z!==null&&z!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#l)t(this);this.#l.clear()}#d(){if(vr.size>1){this.previous.clear();var t=Ye,n=!0;for(const r of vr){if(r===this){n=!1;continue}const i=[];for(const[o,l]of this.current){if(r.current.has(o))if(n&&l!==r.current.get(o))r.current.set(o,l);else continue;i.push(o)}if(i.length===0)continue;const a=[...r.current.keys()].filter(o=>!this.current.has(o));if(a.length>0){var s=Ae;Ae=[];const o=new Set,l=new Map;for(const c of i)Qi(c,a,o,l);if(Ae.length>0){z=r,r.apply();for(const c of Ae)r.#u(c,[],[]);r.deactivate()}Ae=s}}z=null,Ye=t}this.committed=!0,vr.delete(this)}increment(t){this.#e+=1,t&&(this.#s+=1)}decrement(t){this.#e-=1,t&&(this.#s-=1),!this.#o&&(this.#o=!0,mt(()=>{this.#o=!1,this.is_deferred()?Ae.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#a)this.#n.delete(t),ee(t,de),Ze(t);for(const t of this.#n)ee(t,$e),Ze(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#l.add(t)}settled(){return(this.#i??=Fi()).promise}static ensure(){if(z===null){const t=z=new Lt;vr.add(z),Xn||mt(()=>{z===t&&t.flush()})}return z}apply(){}}function Nl(e){var t=Xn;Xn=!0;try{for(var n;;){if(Rl(),Ae.length===0&&(z?.flush(),Ae.length===0))return Mr=null,n;Xi()}}finally{Xn=t}}function Xi(){ns=!0;var e=null;try{for(var t=0;Ae.length>0;){var n=Lt.ensure();if(t++>1e3){var s,r;Ml()}n.process(Ae),Ot.clear()}}finally{Ae=[],ns=!1,Mr=null}}function Ml(){try{kl()}catch(e){xn(e,Mr)}}let vt=null;function ei(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var s=e[n++];if((s.f&(Mt|De))===0&&An(s)&&(vt=new Set,nn(s),s.deps===null&&s.first===null&&s.nodes===null&&s.teardown===null&&s.ac===null&&va(s),vt?.size>0)){Ot.clear();for(const r of vt){if((r.f&(Mt|De))!==0)continue;const i=[r];let a=r.parent;for(;a!==null;)vt.has(a)&&(vt.delete(a),i.push(a)),a=a.parent;for(let o=i.length-1;o>=0;o--){const l=i[o];(l.f&(Mt|De))===0&&nn(l)}}vt.clear()}}vt=null}}function Qi(e,t,n,s){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const r of e.reactions){const i=r.f;(i&fe)!==0?Qi(r,t,n,s):(i&(bs|wt))!==0&&(i&de)===0&&Ki(r,t,s)&&(ee(r,de),Ze(r))}}function Ki(e,t,n){const s=n.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const r of e.deps){if(mn.call(t,r))return!0;if((r.f&fe)!==0&&Ki(r,t,n))return n.set(r,!0),!0}return n.set(e,!1),!1}function Ze(e){for(var t=Mr=e;t.parent!==null;){t=t.parent;var n=t.f;if(ns&&t===F&&(n&wt)!==0&&(n&qi)===0)return;if((n&(sn|Ke))!==0){if((n&le)===0)return;t.f^=le}}Ae.push(t)}function Ji(e,t){if(!((e.f&Ke)!==0&&(e.f&le)!==0)){(e.f&de)!==0?t.d.push(e):(e.f&$e)!==0&&t.m.push(e),ee(e,le);for(var n=e.first;n!==null;)Ji(n,t),n=n.next}}function Dl(e){let t=0,n=Jt(0),s;return()=>{Ts()&&(m(n),En(()=>(t===0&&(s=S(()=>e(()=>Qn(n)))),t+=1,()=>{mt(()=>{t-=1,t===0&&(s?.(),s=void 0,Qn(n))})})))}}var Il=kn|Tn;function Ll(e,t,n){new Ol(e,t,n)}class Ol{parent;is_pending=!1;#t;#l=null;#e;#s;#i;#a=null;#n=null;#r=null;#o=null;#u=0;#c=0;#d=!1;#p=new Set;#h=new Set;#f=null;#b=Dl(()=>(this.#f=Jt(this.#u),()=>{this.#f=null}));constructor(t,n,s){this.#t=t,this.#e=n,this.#s=r=>{var i=F;i.b=this,i.f|=es,s(r)},this.parent=F.b,this.#i=Lr(()=>{this.#g()},Il)}#m(){try{this.#a=Ge(()=>this.#s(this.#t))}catch(t){this.error(t)}}#k(){const t=this.#e.pending;t&&(this.is_pending=!0,this.#n=Ge(()=>t(this.#t)),mt(()=>{var n=this.#o=document.createDocumentFragment(),s=Pt();n.append(s),this.#a=this.#v(()=>(Lt.ensure(),Ge(()=>this.#s(s)))),this.#c===0&&(this.#t.before(n),this.#o=null,Xt(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#c=0,this.#u=0,this.#a=Ge(()=>{this.#s(this.#t)}),this.#c>0){var t=this.#o=document.createDocumentFragment();ba(this.#a,t);const n=this.#e.pending;this.#n=Ge(()=>n(this.#t))}else this.is_pending=!1}catch(n){this.error(n)}}defer_effect(t){Zi(t,this.#p,this.#h)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#v(t){var n=F,s=I,r=V;rt(this.#i),ze(this.#i),wn(this.#i.ctx);try{return t()}catch(i){return Vi(i),null}finally{rt(n),ze(s),wn(r)}}#_(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(t);return}if(this.#c+=t,this.#c===0){this.is_pending=!1;for(const n of this.#p)ee(n,de),Ze(n);for(const n of this.#h)ee(n,$e),Ze(n);this.#p.clear(),this.#h.clear(),this.#n&&Xt(this.#n,()=>{this.#n=null}),this.#o&&(this.#t.before(this.#o),this.#o=null)}}update_pending_count(t){this.#_(t),this.#u+=t,!(!this.#f||this.#d)&&(this.#d=!0,mt(()=>{this.#d=!1,this.#f&&en(this.#f,this.#u)}))}get_effect_pending(){return this.#b(),m(this.#f)}error(t){var n=this.#e.onerror;let s=this.#e.failed;if(!n&&!s)throw t;this.#a&&(Ce(this.#a),this.#a=null),this.#n&&(Ce(this.#n),this.#n=null),this.#r&&(Ce(this.#r),this.#r=null);var r=!1,i=!1;const a=()=>{if(r){Al();return}r=!0,i&&Sl(),this.#r!==null&&Xt(this.#r,()=>{this.#r=null}),this.#v(()=>{Lt.ensure(),this.#g()})};mt(()=>{try{i=!0,n?.(t,a),i=!1}catch(o){xn(o,this.#i&&this.#i.parent)}s&&(this.#r=this.#v(()=>{Lt.ensure();try{return Ge(()=>{var o=F;o.b=this,o.f|=es,s(this.#t,()=>t,()=>a)})}catch(o){return xn(o,this.#i.parent),null}}))})}}function Pl(e,t,n,s){const r=Sn()?ws:ea;var i=e.filter(d=>!d.settled);if(n.length===0&&i.length===0){s(t.map(r));return}var a=z,o=F,l=$l(),c=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(d=>d.promise)):null;function f(d){l();try{s(d)}catch(v){(o.f&Mt)===0&&xn(v,o)}a?.deactivate(),rs()}if(n.length===0){c.then(()=>f(t.map(r)));return}function p(){l(),Promise.all(n.map(d=>zl(d))).then(d=>f([...t.map(r),...d])).catch(d=>xn(d,o))}c?c.then(p):p()}function $l(){var e=F,t=I,n=V,s=z;return function(i=!0){rt(e),ze(t),wn(n),i&&s?.activate()}}function rs(){rt(null),ze(null),wn(null)}function ws(e){var t=fe|de,n=I!==null&&(I.f&fe)!==0?I:null;return F!==null&&(F.f|=Tn),{ctx:V,deps:null,effects:null,equals:Hi,f:t,fn:e,reactions:null,rv:0,v:ue,wv:0,parent:n??F,ac:null}}function zl(e,t,n){let s=F;s===null&&vl();var r=s.b,i=void 0,a=Jt(ue),o=!I,l=new Map;return Kl(()=>{var c=Fi();i=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).then(()=>{f===z&&f.committed&&f.deactivate(),rs()})}catch(v){c.reject(v),rs()}var f=z;if(o){var p=r.is_rendered();r.update_pending_count(1),f.increment(p),l.get(f)?.reject(jt),l.delete(f),l.set(f,c)}const d=(v,h=void 0)=>{if(f.activate(),h)h!==jt&&(a.f|=Dt,en(a,h));else{(a.f&Dt)!==0&&(a.f^=Dt),en(a,v);for(const[k,g]of l){if(l.delete(k),k===f)break;g.reject(jt)}}o&&(r.update_pending_count(-1),f.decrement(p))};c.promise.then(d,v=>d(null,v||"unknown"))}),Ir(()=>{for(const c of l.values())c.reject(jt)}),new Promise(c=>{function f(p){function d(){p===i?c(a):f(i)}p.then(d,d)}f(i)})}function ea(e){const t=ws(e);return t.equals=Gi,t}function Fl(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ce(t[n])}}function Bl(e){for(var t=e.parent;t!==null;){if((t.f&fe)===0)return(t.f&Mt)===0?t:null;t=t.parent}return null}function xs(e){var t,n=F;rt(Bl(e));try{e.f&=~Kt,Fl(e),t=xa(e)}finally{rt(n)}return t}function ta(e){var t=xs(e);if(!e.equals(t)&&(e.wv=ka(),(!z?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){ee(e,le);return}tn||(Ye!==null?(Ts()||z?.is_fork)&&Ye.set(e,t):ks(e))}function ql(e){if(e.effects!==null)for(const t of e.effects)(t.teardown||t.ac)&&(t.teardown?.(),t.ac?.abort(jt),t.teardown=bt,t.ac=null,tr(t,0),Ss(t))}function na(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&nn(t)}let ss=new Set;const Ot=new Map;let ra=!1;function Jt(e,t){var n={f:0,v:e,reactions:null,equals:Hi,rv:0,wv:0};return n}function At(e,t){const n=Jt(e);return to(n),n}function te(e,t=!1,n=!0){const s=Jt(e);return t||(s.equals=Gi),sr&&n&&V!==null&&V.l!==null&&(V.l.s??=[]).push(s),s}function Ul(e,t){return q(e,S(()=>m(e))),t}function q(e,t,n=!1){I!==null&&(!Xe||(I.f&Js)!==0)&&Sn()&&(I.f&(fe|wt|bs|Js))!==0&&(Pe===null||!mn.call(Pe,e))&&Tl();let s=n?jn(t):t;return en(e,s)}function en(e,t){if(!e.equals(t)){var n=e.v;tn?Ot.set(e,t):Ot.set(e,n),e.v=t;var s=Lt.ensure();if(s.capture(e,n),(e.f&fe)!==0){const r=e;(e.f&de)!==0&&xs(r),ks(r)}e.wv=ka(),sa(e,de),Sn()&&F!==null&&(F.f&le)!==0&&(F.f&(Ke|sn))===0&&(Le===null?no([e]):Le.push(e)),!s.is_fork&&ss.size>0&&!ra&&Hl()}return t}function Hl(){ra=!1;for(const e of ss)(e.f&le)!==0&&ee(e,$e),An(e)&&nn(e);ss.clear()}function Qn(e){q(e,e.v+1)}function sa(e,t){var n=e.reactions;if(n!==null)for(var s=Sn(),r=n.length,i=0;i<r;i++){var a=n[i],o=a.f;if(!(!s&&a===F)){var l=(o&de)===0;if(l&&ee(a,t),(o&fe)!==0){var c=a;Ye?.delete(c),(o&Kt)===0&&(o&Oe&&(a.f|=Kt),sa(c,$e))}else l&&((o&wt)!==0&&vt!==null&&vt.add(a),Ze(a))}}}function jn(e){if(typeof e!="object"||e===null||It in e)return e;const t=_s(e);if(t!==dl&&t!==pl)return e;var n=new Map,s=gs(e),r=At(0),i=Qt,a=o=>{if(Qt===i)return o();var l=I,c=Qt;ze(null),ii(i);var f=o();return ze(l),ii(c),f};return s&&n.set("length",At(e.length)),new Proxy(e,{defineProperty(o,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&xl();var f=n.get(l);return f===void 0?a(()=>{var p=At(c.value);return n.set(l,p),p}):q(f,c.value,!0),!0},deleteProperty(o,l){var c=n.get(l);if(c===void 0){if(l in o){const f=a(()=>At(ue));n.set(l,f),Qn(r)}}else q(c,ue),Qn(r);return!0},get(o,l,c){if(l===It)return e;var f=n.get(l),p=l in o;if(f===void 0&&(!p||Zn(o,l)?.writable)&&(f=a(()=>{var v=jn(p?o[l]:ue),h=At(v);return h}),n.set(l,f)),f!==void 0){var d=m(f);return d===ue?void 0:d}return Reflect.get(o,l,c)},getOwnPropertyDescriptor(o,l){var c=Reflect.getOwnPropertyDescriptor(o,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=m(f))}else if(c===void 0){var p=n.get(l),d=p?.v;if(p!==void 0&&d!==ue)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return c},has(o,l){if(l===It)return!0;var c=n.get(l),f=c!==void 0&&c.v!==ue||Reflect.has(o,l);if(c!==void 0||F!==null&&(!f||Zn(o,l)?.writable)){c===void 0&&(c=a(()=>{var d=f?jn(o[l]):ue,v=At(d);return v}),n.set(l,c));var p=m(c);if(p===ue)return!1}return f},set(o,l,c,f){var p=n.get(l),d=l in o;if(s&&l==="length")for(var v=c;v<p.v;v+=1){var h=n.get(v+"");h!==void 0?q(h,ue):v in o&&(h=a(()=>At(ue)),n.set(v+"",h))}if(p===void 0)(!d||Zn(o,l)?.writable)&&(p=a(()=>At(void 0)),q(p,jn(c)),n.set(l,p));else{d=p.v!==ue;var k=a(()=>jn(c));q(p,k)}var g=Reflect.getOwnPropertyDescriptor(o,l);if(g?.set&&g.set.call(f,c),!d){if(s&&typeof l=="string"){var E=n.get("length"),D=Number(l);Number.isInteger(D)&&D>=E.v&&q(E,D+1)}Qn(r)}return!0},ownKeys(o){m(r);var l=Reflect.ownKeys(o).filter(p=>{var d=n.get(p);return d===void 0||d.v!==ue});for(var[c,f]of n)f.v!==ue&&!(c in o)&&l.push(c);return l},setPrototypeOf(){yl()}})}function ti(e){try{if(e!==null&&typeof e=="object"&&It in e)return e[It]}catch{}return e}function Wl(e,t){return Object.is(ti(e),ti(t))}var ni,ia,aa,la;function Gl(){if(ni===void 0){ni=window,ia=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;aa=Zn(t,"firstChild").get,la=Zn(t,"nextSibling").get,Ks(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ks(n)&&(n.__t=void 0)}}function Pt(e=""){return document.createTextNode(e)}function nt(e){return aa.call(e)}function lr(e){return la.call(e)}function b(e,t){return nt(e)}function oa(e,t=!1){{var n=nt(e);return n instanceof Comment&&n.data===""?lr(n):n}}function x(e,t=1,n=!1){let s=e;for(;t--;)s=lr(s);return s}function jl(e){e.textContent=""}function ca(){return!1}function Vl(e,t,n){return document.createElementNS(Pi,e,void 0)}let ri=!1;function Yl(){ri||(ri=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Dr(e){var t=I,n=F;ze(null),rt(null);try{return e()}finally{ze(t),rt(n)}}function ys(e,t,n,s=n){e.addEventListener(t,()=>Dr(n));const r=e.__on_r;r?e.__on_r=()=>{r(),s(!0)}:e.__on_r=()=>s(!0),Yl()}function ua(e){F===null&&(I===null&&ml(),bl()),tn&&_l()}function Zl(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function at(e,t,n){var s=F;s!==null&&(s.f&De)!==0&&(e|=De);var r={ctx:V,deps:null,nodes:null,f:e|de|Oe,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{nn(r)}catch(o){throw Ce(r),o}else t!==null&&Ze(r);var i=r;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Tn)===0&&(i=i.first,(e&wt)!==0&&(e&kn)!==0&&i!==null&&(i.f|=kn)),i!==null&&(i.parent=s,s!==null&&Zl(i,s),I!==null&&(I.f&fe)!==0&&(e&sn)===0)){var a=I;(a.effects??=[]).push(i)}return r}function Ts(){return I!==null&&!Xe}function Ir(e){const t=at(ir,null,!1);return ee(t,le),t.teardown=e,t}function is(e){ua();var t=F.f,n=!I&&(t&Ke)!==0&&(t&ar)===0;if(n){var s=V;(s.e??=[]).push(e)}else return fa(e)}function fa(e){return at(er|Ui,e,!1)}function Xl(e){return ua(),at(ir|Ui,e,!0)}function Ql(e){Lt.ensure();const t=at(sn|Tn,e,!0);return(n={})=>new Promise(s=>{n.outro?Xt(t,()=>{Ce(t),s(void 0)}):(Ce(t),s(void 0))})}function da(e){return at(er,e,!1)}function ve(e,t){var n=V,s={effect:null,ran:!1,deps:e};n.l.$.push(s),s.effect=En(()=>{e(),!s.ran&&(s.ran=!0,S(t))})}function an(){var e=V;En(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&le)!==0&&n.deps!==null&&ee(n,$e),An(n)&&nn(n),t.ran=!1}})}function Kl(e){return at(bs|Tn,e,!0)}function En(e,t=0){return at(ir|t,e,!0)}function J(e,t=[],n=[],s=[]){Pl(s,t,n,r=>{at(ir,()=>e(...r.map(m)),!0)})}function Lr(e,t=0){var n=at(wt|t,e,!0);return n}function Ge(e){return at(Ke|Tn,e,!0)}function pa(e){var t=e.teardown;if(t!==null){const n=tn,s=I;si(!0),ze(null);try{t.call(null)}finally{si(n),ze(s)}}}function Ss(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&Dr(()=>{r.abort(jt)});var s=n.next;(n.f&sn)!==0?n.parent=null:Ce(n,t),n=s}}function Jl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Ke)===0&&Ce(t),t=n}}function Ce(e,t=!0){var n=!1;(t||(e.f&qi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(ha(e.nodes.start,e.nodes.end),n=!0),Ss(e,t&&!n),tr(e,0),ee(e,Mt);var s=e.nodes&&e.nodes.t;if(s!==null)for(const i of s)i.stop();pa(e);var r=e.parent;r!==null&&r.first!==null&&va(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function ha(e,t){for(;e!==null;){var n=e===t?null:lr(e);e.remove(),e=n}}function va(e){var t=e.parent,n=e.prev,s=e.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=n))}function Xt(e,t,n=!0){var s=[];ga(e,s,!0);var r=()=>{n&&Ce(e),t&&t()},i=s.length;if(i>0){var a=()=>--i||r();for(var o of s)o.out(a)}else r()}function ga(e,t,n){if((e.f&De)===0){e.f^=De;var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var i=r.next,a=(r.f&kn)!==0||(r.f&Ke)!==0&&(e.f&wt)!==0;ga(r,t,a?n:!1),r=i}}}function Es(e){_a(e,!0)}function _a(e,t){if((e.f&De)!==0){e.f^=De,(e.f&le)===0&&(ee(e,de),Ze(e));for(var n=e.first;n!==null;){var s=n.next,r=(n.f&kn)!==0||(n.f&Ke)!==0;_a(n,r?t:!1),n=s}var i=e.nodes&&e.nodes.t;if(i!==null)for(const a of i)(a.is_global||t)&&a.in()}}function ba(e,t){if(e.nodes)for(var n=e.nodes.start,s=e.nodes.end;n!==null;){var r=n===s?null:lr(n);t.append(n),n=r}}let _n=null;function eo(e){var t=_n;try{if(_n=new Set,S(e),t!==null)for(var n of _n)t.add(n);return _n}finally{_n=t}}function Rt(e){for(var t of eo(e))en(t,t.v)}let wr=!1,tn=!1;function si(e){tn=e}let I=null,Xe=!1;function ze(e){I=e}let F=null;function rt(e){F=e}let Pe=null;function to(e){I!==null&&(Pe===null?Pe=[e]:Pe.push(e))}let Re=null,Ne=0,Le=null;function no(e){Le=e}let ma=1,Yt=0,Qt=Yt;function ii(e){Qt=e}function ka(){return++ma}function An(e){var t=e.f;if((t&de)!==0)return!0;if(t&fe&&(e.f&=~Kt),(t&$e)!==0){for(var n=e.deps,s=n.length,r=0;r<s;r++){var i=n[r];if(An(i)&&ta(i),i.wv>e.wv)return!0}(t&Oe)!==0&&Ye===null&&ee(e,le)}return!1}function wa(e,t,n=!0){var s=e.reactions;if(s!==null&&!(Pe!==null&&mn.call(Pe,e)))for(var r=0;r<s.length;r++){var i=s[r];(i.f&fe)!==0?wa(i,t,!1):t===i&&(n?ee(i,de):(i.f&le)!==0&&ee(i,$e),Ze(i))}}function xa(e){var t=Re,n=Ne,s=Le,r=I,i=Pe,a=V,o=Xe,l=Qt,c=e.f;Re=null,Ne=0,Le=null,I=(c&(Ke|sn))===0?e:null,Pe=null,wn(e.ctx),Xe=!1,Qt=++Yt,e.ac!==null&&(Dr(()=>{e.ac.abort(jt)}),e.ac=null);try{e.f|=ts;var f=e.fn,p=f();e.f|=ar;var d=e.deps,v=z?.is_fork;if(Re!==null){var h;if(v||tr(e,Ne),d!==null&&Ne>0)for(d.length=Ne+Re.length,h=0;h<Re.length;h++)d[Ne+h]=Re[h];else e.deps=d=Re;if(Ts()&&(e.f&Oe)!==0)for(h=Ne;h<d.length;h++)(d[h].reactions??=[]).push(e)}else!v&&d!==null&&Ne<d.length&&(tr(e,Ne),d.length=Ne);if(Sn()&&Le!==null&&!Xe&&d!==null&&(e.f&(fe|$e|de))===0)for(h=0;h<Le.length;h++)wa(Le[h],e);if(r!==null&&r!==e){if(Yt++,r.deps!==null)for(let k=0;k<n;k+=1)r.deps[k].rv=Yt;if(t!==null)for(const k of t)k.rv=Yt;Le!==null&&(s===null?s=Le:s.push(...Le))}return(e.f&Dt)!==0&&(e.f^=Dt),p}catch(k){return Vi(k)}finally{e.f^=ts,Re=t,Ne=n,Le=s,I=r,Pe=i,wn(a),Xe=o,Qt=l}}function ro(e,t){let n=t.reactions;if(n!==null){var s=fl.call(n,e);if(s!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[s]=n[r],n.pop())}}if(n===null&&(t.f&fe)!==0&&(Re===null||!mn.call(Re,t))){var i=t;(i.f&Oe)!==0&&(i.f^=Oe,i.f&=~Kt),ks(i),ql(i),tr(i,0)}}function tr(e,t){var n=e.deps;if(n!==null)for(var s=t;s<n.length;s++)ro(e,n[s])}function nn(e){var t=e.f;if((t&Mt)===0){ee(e,le);var n=F,s=wr;F=e,wr=!0;try{(t&(wt|Bi))!==0?Jl(e):Ss(e),pa(e);var r=xa(e);e.teardown=typeof r=="function"?r:null,e.wv=ma;var i;Jr&&rl&&(e.f&de)!==0&&e.deps}finally{wr=s,F=n}}}async function so(){await Promise.resolve(),Nl()}function m(e){var t=e.f,n=(t&fe)!==0;if(_n?.add(e),I!==null&&!Xe){var s=F!==null&&(F.f&Mt)!==0;if(!s&&(Pe===null||!mn.call(Pe,e))){var r=I.deps;if((I.f&ts)!==0)e.rv<Yt&&(e.rv=Yt,Re===null&&r!==null&&r[Ne]===e?Ne++:Re===null?Re=[e]:Re.push(e));else{(I.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[I]:mn.call(i,I)||i.push(I)}}}if(tn&&Ot.has(e))return Ot.get(e);if(n){var a=e;if(tn){var o=a.v;return((a.f&le)===0&&a.reactions!==null||Ta(a))&&(o=xs(a)),Ot.set(a,o),o}var l=(a.f&Oe)===0&&!Xe&&I!==null&&(wr||(I.f&Oe)!==0),c=(a.f&ar)===0;An(a)&&(l&&(a.f|=Oe),ta(a)),l&&!c&&(na(a),ya(a))}if(Ye?.has(e))return Ye.get(e);if((e.f&Dt)!==0)throw e.v;return e.v}function ya(e){if(e.f|=Oe,e.deps!==null)for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&fe)!==0&&(t.f&Oe)===0&&(na(t),ya(t))}function Ta(e){if(e.v===ue)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ot.has(t)||(t.f&fe)!==0&&Ta(t))return!0;return!1}function S(e){var t=Xe;try{return Xe=!0,e()}finally{Xe=t}}function io(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(It in e)as(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&It in n&&as(n)}}}function as(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{as(e[s],t)}catch{}const n=_s(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=zi(n);for(let r in s){const i=s[r].get;if(i)try{i.call(e)}catch{}}}}}const gr=Symbol("events"),ao=new Set,ai=new Set;function lo(e,t,n,s={}){function r(i){if(s.capture||ls.call(t,i),!i.cancelBubble)return Dr(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?mt(()=>{t.addEventListener(e,r,s)}):t.addEventListener(e,r,s),r}function We(e,t,n,s,r){var i={capture:s,passive:r},a=lo(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Ir(()=>{t.removeEventListener(e,a,i)})}let li=null;function ls(e){var t=this,n=t.ownerDocument,s=e.type,r=e.composedPath?.()||[],i=r[0]||e.target;li=e;var a=0,o=li===e&&e[gr];if(o){var l=r.indexOf(o);if(l!==-1&&(t===document||t===window)){e[gr]=t;return}var c=r.indexOf(t);if(c===-1)return;l<=c&&(a=l)}if(i=r[a]||e.target,i!==t){$i(e,"currentTarget",{configurable:!0,get(){return i||n}});var f=I,p=F;ze(null),rt(null);try{for(var d,v=[];i!==null;){var h=i.assignedSlot||i.parentNode||i.host||null;try{var k=i[gr]?.[s];k!=null&&(!i.disabled||e.target===i)&&k.call(i,e)}catch(g){d?v.push(g):d=g}if(e.cancelBubble||h===t||h===null)break;i=h}if(d){for(let g of v)queueMicrotask(()=>{throw g});throw d}}finally{e[gr]=t,delete e.currentTarget,ze(f),rt(p)}}}const oo=globalThis?.window?.trustedTypes&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function co(e){return oo?.createHTML(e)??e}function As(e,t=!1){var n=Vl("template");return e=e.replaceAll("<!>","<!---->"),n.innerHTML=t?co(e):e,n.content}function nr(e,t){var n=F;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function O(e,t){var n=(t&cl)!==0,s=(t&ul)!==0,r,i=!e.startsWith("<!>");return()=>{r===void 0&&(r=As(i?e:"<!>"+e,!0),n||(r=nt(r)));var a=s||ia?document.importNode(r,!0):r.cloneNode(!0);if(n){var o=nt(a),l=a.lastChild;nr(o,l)}else nr(a,a);return a}}function uo(e,t,n="svg"){var s=!e.startsWith("<!>"),r=`<${n}>${s?e:"<!>"+e}</${n}>`,i;return()=>{if(!i){var a=As(r,!0),o=nt(a);i=nt(o)}var l=i.cloneNode(!0);return nr(l,l),l}}function fo(e,t){return uo(e,t,"svg")}function Sa(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Pt();return e.append(t,n),nr(t,n),e}function M(e,t){e!==null&&e.before(t)}const po=["touchstart","touchmove"];function ho(e){return po.includes(e)}function Y(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function vo(e,t){return go(e,t)}const _r=new Map;function go(e,{target:t,anchor:n,props:s={},events:r,context:i,intro:a=!0}){Gl();var o=void 0,l=Ql(()=>{var c=n??t.appendChild(Pt());Ll(c,{pending:()=>{}},d=>{st({});var v=V;i&&(v.c=i),r&&(s.$$events=r),o=e(d,s)||{},it()});var f=new Set,p=d=>{for(var v=0;v<d.length;v++){var h=d[v];if(!f.has(h)){f.add(h);var k=ho(h);for(const D of[t,document]){var g=_r.get(D);g===void 0&&(g=new Map,_r.set(D,g));var E=g.get(h);E===void 0?(D.addEventListener(h,ls,{passive:k}),g.set(h,1)):g.set(h,E+1)}}}};return p(Nr(ao)),ai.add(p),()=>{for(var d of f)for(const k of[t,document]){var v=_r.get(k),h=v.get(d);--h==0?(k.removeEventListener(d,ls),v.delete(d),v.size===0&&_r.delete(k)):v.set(d,h)}ai.delete(p),c!==n&&c.parentNode?.removeChild(c)}});return _o.set(o,l),o}let _o=new WeakMap;class Ea{anchor;#t=new Map;#l=new Map;#e=new Map;#s=new Set;#i=!0;constructor(t,n=!0){this.anchor=t,this.#i=n}#a=()=>{var t=z;if(this.#t.has(t)){var n=this.#t.get(t),s=this.#l.get(n);if(s)Es(s),this.#s.delete(n);else{var r=this.#e.get(n);r&&(this.#l.set(n,r.effect),this.#e.delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),s=r.effect)}for(const[i,a]of this.#t){if(this.#t.delete(i),i===t)break;const o=this.#e.get(a);o&&(Ce(o.effect),this.#e.delete(a))}for(const[i,a]of this.#l){if(i===n||this.#s.has(i))continue;const o=()=>{if(Array.from(this.#t.values()).includes(i)){var c=document.createDocumentFragment();ba(a,c),c.append(Pt()),this.#e.set(i,{effect:a,fragment:c})}else Ce(a);this.#s.delete(i),this.#l.delete(i)};this.#i||!s?(this.#s.add(i),Xt(a,o,!1)):o()}}};#n=t=>{this.#t.delete(t);const n=Array.from(this.#t.values());for(const[s,r]of this.#e)n.includes(s)||(Ce(r.effect),this.#e.delete(s))};ensure(t,n){var s=z,r=ca();if(n&&!this.#l.has(t)&&!this.#e.has(t))if(r){var i=document.createDocumentFragment(),a=Pt();i.append(a),this.#e.set(t,{effect:Ge(()=>n(a)),fragment:i})}else this.#l.set(t,Ge(()=>n(this.anchor)));if(this.#t.set(s,t),r){for(const[o,l]of this.#l)o===t?s.unskip_effect(l):s.skip_effect(l);for(const[o,l]of this.#e)o===t?s.unskip_effect(l.effect):s.skip_effect(l.effect);s.oncommit(this.#a),s.ondiscard(this.#n)}else this.#a()}}function Aa(e){V===null&&ms(),sr&&V.l!==null?Ra(V).m.push(e):is(()=>{const t=S(e);if(typeof t=="function")return t})}function bo(e){V===null&&ms(),Aa(()=>()=>S(e))}function mo(e){V===null&&ms(),V.l===null&&wl(),Ra(V).a.push(e)}function Ra(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}function ge(e,t,n=!1){var s=new Ea(e),r=n?kn:0;function i(a,o){s.ensure(a,o)}Lr(()=>{var a=!1;t((o,l=0)=>{a=!0,i(l,o)}),a||i(!1,null)},r)}const ko=Symbol("NaN");function wo(e,t,n){var s=new Ea(e),r=!Sn();Lr(()=>{var i=t();i!==i&&(i=ko),r&&i!==null&&typeof i=="object"&&(i={}),s.ensure(i,n)})}function Rs(e,t){return t}function xo(e,t,n){for(var s=[],r=t.length,i,a=t.length,o=0;o<r;o++){let p=t[o];Xt(p,()=>{if(i){if(i.pending.delete(p),i.done.add(p),i.pending.size===0){var d=e.outrogroups;os(Nr(i.done)),d.delete(i),d.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var l=s.length===0&&n!==null;if(l){var c=n,f=c.parentNode;jl(f),f.append(c),e.items.clear()}os(t,!l)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function os(e,t=!0){for(var n=0;n<e.length;n++)Ce(e[n],t)}var oi;function rr(e,t,n,s,r,i=null){var a=e,o=new Map,l=(t&Oi)!==0;if(l){var c=e;a=c.appendChild(Pt())}var f=null,p=ea(()=>{var E=n();return gs(E)?E:E==null?[]:Nr(E)}),d,v=!0;function h(){g.fallback=f,yo(g,d,a,t,s),f!==null&&(d.length===0?(f.f&_t)===0?Es(f):(f.f^=_t,Vn(f,null,a)):Xt(f,()=>{f=null}))}var k=Lr(()=>{d=m(p);for(var E=d.length,D=new Set,y=z,w=ca(),R=0;R<E;R+=1){var C=d[R],X=s(C,R),W=v?null:o.get(X);W?(W.v&&en(W.v,C),W.i&&en(W.i,R),w&&y.unskip_effect(W.e)):(W=To(o,v?a:oi??=Pt(),C,X,R,r,t,n),v||(W.e.f|=_t),o.set(X,W)),D.add(X)}if(E===0&&i&&!f&&(v?f=Ge(()=>i(a)):(f=Ge(()=>i(oi??=Pt())),f.f|=_t)),E>D.size&&gl(),!v)if(w){for(const[_e,j]of o)D.has(_e)||y.skip_effect(j.e);y.oncommit(h),y.ondiscard(()=>{})}else h();m(p)}),g={effect:k,items:o,outrogroups:null,fallback:f};v=!1}function $n(e){for(;e!==null&&(e.f&Ke)===0;)e=e.next;return e}function yo(e,t,n,s,r){var i=(s&ll)!==0,a=t.length,o=e.items,l=$n(e.effect.first),c,f=null,p,d=[],v=[],h,k,g,E;if(i)for(E=0;E<a;E+=1)h=t[E],k=r(h,E),g=o.get(k).e,(g.f&_t)===0&&(g.nodes?.a?.measure(),(p??=new Set).add(g));for(E=0;E<a;E+=1){if(h=t[E],k=r(h,E),g=o.get(k).e,e.outrogroups!==null)for(const j of e.outrogroups)j.pending.delete(g),j.done.delete(g);if((g.f&_t)!==0)if(g.f^=_t,g===l)Vn(g,null,n);else{var D=f?f.next:l;g===e.effect.last&&(e.effect.last=g.prev),g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),Ct(e,f,g),Ct(e,g,D),Vn(g,D,n),f=g,d=[],v=[],l=$n(f.next);continue}if((g.f&De)!==0&&(Es(g),i&&(g.nodes?.a?.unfix(),(p??=new Set).delete(g))),g!==l){if(c!==void 0&&c.has(g)){if(d.length<v.length){var y=v[0],w;f=y.prev;var R=d[0],C=d[d.length-1];for(w=0;w<d.length;w+=1)Vn(d[w],y,n);for(w=0;w<v.length;w+=1)c.delete(v[w]);Ct(e,R.prev,C.next),Ct(e,f,R),Ct(e,C,y),l=y,f=C,E-=1,d=[],v=[]}else c.delete(g),Vn(g,l,n),Ct(e,g.prev,g.next),Ct(e,g,f===null?e.effect.first:f.next),Ct(e,f,g),f=g;continue}for(d=[],v=[];l!==null&&l!==g;)(c??=new Set).add(l),v.push(l),l=$n(l.next);if(l===null)continue}(g.f&_t)===0&&d.push(g),f=g,l=$n(g.next)}if(e.outrogroups!==null){for(const j of e.outrogroups)j.pending.size===0&&(os(Nr(j.done)),e.outrogroups?.delete(j));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||c!==void 0){var X=[];if(c!==void 0)for(g of c)(g.f&De)===0&&X.push(g);for(;l!==null;)(l.f&De)===0&&l!==e.fallback&&X.push(l),l=$n(l.next);var W=X.length;if(W>0){var _e=(s&Oi)!==0&&a===0?n:null;if(i){for(E=0;E<W;E+=1)X[E].nodes?.a?.measure();for(E=0;E<W;E+=1)X[E].nodes?.a?.fix()}xo(e,X,_e)}}i&&mt(()=>{if(p!==void 0)for(g of p)g.nodes?.a?.apply()})}function To(e,t,n,s,r,i,a,o){var l=(a&il)!==0?(a&ol)===0?te(n,!1,!1):Jt(n):null,c=(a&al)!==0?Jt(r):null;return{v:l,i:c,e:Ge(()=>(i(t,l??n,c??r,o),()=>{e.delete(s)}))}}function Vn(e,t,n){if(e.nodes)for(var s=e.nodes.start,r=e.nodes.end,i=t&&(t.f&_t)===0?t.nodes.start:n;s!==null;){var a=lr(s);if(i.before(s),s===r)return;s=a}}function Ct(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function ci(e,t,n=!1,s=!1,r=!1){var i=e,a="";J(()=>{var o=F;if(a!==(a=t()??"")&&(o.nodes!==null&&(ha(o.nodes.start,o.nodes.end),o.nodes=null),a!=="")){var l=a+"";n?l=`<svg>${l}</svg>`:s&&(l=`<math>${l}</math>`);var c=As(l);if((n||s)&&(c=nt(c)),nr(nt(c),c.lastChild),n||s)for(;nt(c);)i.before(nt(c));else i.before(c)}})}const ui=[...` 	
\r\fÂ \v\uFEFF`];function So(e,t,n){var s=e==null?"":""+e;if(n){for(var r in n)if(n[r])s=s?s+" "+r:r;else if(s.length)for(var i=r.length,a=0;(a=s.indexOf(r,a))>=0;){var o=a+i;(a===0||ui.includes(s[a-1]))&&(o===s.length||ui.includes(s[o]))?s=(a===0?"":s.substring(0,a))+s.substring(o+1):a=o}}return s===""?null:s}function fi(e,t=!1){var n=t?" !important;":";",s="";for(var r in e){var i=e[r];i!=null&&i!==""&&(s+=" "+r+": "+i+n)}return s}function qr(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Eo(e,t){if(t){var n="",s,r;if(Array.isArray(t)?(s=t[0],r=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,o=!1,l=[];s&&l.push(...Object.keys(s).map(qr)),r&&l.push(...Object.keys(r).map(qr));var c=0,f=-1;const k=e.length;for(var p=0;p<k;p++){var d=e[p];if(o?d==="/"&&e[p-1]==="*"&&(o=!1):i?i===d&&(i=!1):d==="/"&&e[p+1]==="*"?o=!0:d==='"'||d==="'"?i=d:d==="("?a++:d===")"&&a--,!o&&i===!1&&a===0){if(d===":"&&f===-1)f=p;else if(d===";"||p===k-1){if(f!==-1){var v=qr(e.substring(c,f).trim());if(!l.includes(v)){d!==";"&&p++;var h=e.substring(c,p).trim();n+=" "+h+";"}}c=p+1,f=-1}}}}return s&&(n+=fi(s)),r&&(n+=fi(r,!0)),n=n.trim(),n===""?null:n}return e==null?null:String(e)}function kt(e,t,n,s,r,i){var a=e.__className;if(a!==n||a===void 0){var o=So(n,s,i);o==null?e.removeAttribute("class"):e.className=o,e.__className=n}else if(i&&r!==i)for(var l in i){var c=!!i[l];(r==null||c!==!!r[l])&&e.classList.toggle(l,c)}return i}function Ur(e,t={},n,s){for(var r in n){var i=n[r];t[r]!==i&&(n[r]==null?e.style.removeProperty(r):e.style.setProperty(r,i,s))}}function Cs(e,t,n,s){var r=e.__style;if(r!==t){var i=Eo(t,s);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else s&&(Array.isArray(s)?(Ur(e,n?.[0],s[0]),Ur(e,n?.[1],s[1],"important")):Ur(e,n,s));return s}function Ca(e,t,n=!1){if(e.multiple){if(t==null)return;if(!gs(t))return El();for(var s of e.options)s.selected=t.includes(Kn(s));return}for(s of e.options){var r=Kn(s);if(Wl(r,t)){s.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ao(e){var t=new MutationObserver(()=>{Ca(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ir(()=>{t.disconnect()})}function Ro(e,t,n=t){var s=new WeakSet,r=!0;ys(e,"change",i=>{var a=i?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(a),Kn);else{var l=e.querySelector(a)??e.querySelector("option:not([disabled])");o=l&&Kn(l)}n(o),z!==null&&s.add(z)}),da(()=>{var i=t();if(e===document.activeElement){var a=Sr??z;if(s.has(a))return}if(Ca(e,i,r),r&&i===void 0){var o=e.querySelector(":checked");o!==null&&(i=Kn(o),n(i))}e.__value=i,r=!1}),Ao(e)}function Kn(e){return"__value"in e?e.__value:e.value}const Co=Symbol("is custom element"),No=Symbol("is html");function Mo(e,t){var n=Na(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function Do(e,t,n,s){var r=Na(e);r[t]!==(r[t]=n)&&(n==null?e.removeAttribute(t):typeof n!="string"&&Io(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Na(e){return e.__attributes??={[Co]:e.nodeName.includes("-"),[No]:e.namespaceURI===Pi}}var di=new Map;function Io(e){var t=e.getAttribute("is")||e.nodeName,n=di.get(t);if(n)return n;di.set(t,n=[]);for(var s,r=e,i=Element.prototype;i!==r;){s=zi(r);for(var a in s)s[a].set&&n.push(a);r=_s(r)}return n}function zn(e,t,n=t){var s=new WeakSet;ys(e,"input",async r=>{var i=r?e.defaultValue:e.value;if(i=Wr(e)?Gr(i):i,n(i),z!==null&&s.add(z),await so(),i!==(i=t())){var a=e.selectionStart,o=e.selectionEnd,l=e.value.length;if(e.value=i??"",o!==null){var c=e.value.length;a===o&&o===l&&c>l?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=a,e.selectionEnd=Math.min(o,c))}}}),S(t)==null&&e.value&&(n(Wr(e)?Gr(e.value):e.value),z!==null&&s.add(z)),En(()=>{var r=t();if(e===document.activeElement){var i=Sr??z;if(s.has(i))return}Wr(e)&&r===Gr(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function Hr(e,t,n=t){ys(e,"change",s=>{var r=s?e.defaultChecked:e.checked;n(r)}),S(t)==null&&n(e.checked),En(()=>{var s=t();e.checked=!!s})}function Wr(e){var t=e.type;return t==="number"||t==="range"}function Gr(e){return e===""?null:+e}function pi(e,t){return e===t||e?.[It]===t}function Lo(e={},t,n,s){return da(()=>{var r,i;return En(()=>{r=i,i=[],S(()=>{e!==n(...i)&&(t(e,...i),r&&pi(n(...r),e)&&t(null,...r))})}),()=>{mt(()=>{i&&pi(n(...i),e)&&t(null,...i)})}}),e}function xt(e=!1){const t=V,n=t.l.u;if(!n)return;let s=()=>io(t.s);if(e){let r=0,i={};const a=ws(()=>{let o=!1;const l=t.s;for(const c in l)l[c]!==i[c]&&(i[c]=l[c],o=!0);return o&&r++,r});s=()=>m(a)}n.b.length&&Xl(()=>{hi(t,s),Tr(n.b)}),is(()=>{const r=S(()=>n.m.map(hl));return()=>{for(const i of r)typeof i=="function"&&i()}}),n.a.length&&is(()=>{hi(t,s),Tr(n.a)})}function hi(e,t){if(e.l.s)for(const n of e.l.s)m(n);t()}function Ns(e,t,n){if(e==null)return t(void 0),n&&n(void 0),bt;const s=S(()=>e.subscribe(t,n));return s.unsubscribe?()=>s.unsubscribe():s}const gn=[];function Oo(e,t){return{subscribe:Rn(e,t).subscribe}}function Rn(e,t=bt){let n=null;const s=new Set;function r(o){if(Wi(e,o)&&(e=o,n)){const l=!gn.length;for(const c of s)c[1](),gn.push(c,e);if(l){for(let c=0;c<gn.length;c+=2)gn[c][0](gn[c+1]);gn.length=0}}}function i(o){r(o(e))}function a(o,l=bt){const c=[o,l];return s.add(c),s.size===1&&(n=t(r,i)||bt),o(e),()=>{s.delete(c),s.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:a}}function Po(e,t,n){const s=!Array.isArray(e),r=s?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return Oo(n,(a,o)=>{let l=!1;const c=[];let f=0,p=bt;const d=()=>{if(f)return;p();const h=t(s?c[0]:c,a,o);i?a(h):p=typeof h=="function"?h:bt},v=r.map((h,k)=>Ns(h,g=>{c[k]=g,f&=~(1<<k),l&&d()},()=>{f|=1<<k}));return l=!0,d(),function(){Tr(v),p(),l=!1}})}function yn(e){let t;return Ns(e,n=>t=n)(),t}let cs=Symbol();function Qe(e,t,n){const s=n[t]??={store:null,source:te(void 0),unsubscribe:bt};if(s.store!==e&&!(cs in n))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=bt;else{var r=!0;s.unsubscribe=Ns(e,i=>{r?s.source.v=i:q(s.source,i)}),r=!1}return e&&cs in n?yn(e):m(s.source)}function $t(){const e={};function t(){Ir(()=>{for(var n in e)e[n].unsubscribe();$i(e,cs,{enumerable:!1,value:!0})})}return[e,t]}function Nt(e,t,n){return e.set(n),t}const $o={ws:null,status:"disconnected",model:"",agentStatus:"idle",reconnectAttempts:0},Me=Rn($o);Po(Me,e=>e.status==="connected");const zo={messages:[],currentResponse:"",currentReasoning:"",isStreaming:!1,taskDraft:""},Ue=Rn(zo);let Fo=0;function jr(){return`msg-${++Fo}-${Date.now()}`}const Bo={micState:"idle",speakerState:"idle",audioLevel:0,isVadActive:!1,currentTranscription:"",wakewordActive:!1,wakewordPulse:0,streaming:!1},K=Rn(Bo);class qo{audioContext=null;audioQueue=[];isPlaying=!1;currentSource=null;constructor(){typeof window<"u"&&(this.audioContext=new(window.AudioContext||window.webkitAudioContext))}async playChunk(t,n){if(this.audioContext){if(this.audioContext.state==="suspended")try{await this.audioContext.resume()}catch{}K.update(s=>({...s,speakerState:"speaking"}));try{const s=atob(t),r=new Uint8Array(s.length);for(let l=0;l<s.length;l++)r[l]=s.charCodeAt(l);const i=new Int16Array(r.buffer),a=new Float32Array(i.length);for(let l=0;l<i.length;l++)a[l]=i[l]/32768;const o=this.audioContext.createBuffer(1,a.length,n);o.getChannelData(0).set(a),this.audioQueue.push(o),this.isPlaying||this.playNext()}catch(s){console.error("Error playing audio chunk:",s),K.update(r=>({...r,speakerState:"idle"}))}}}playNext(){if(this.audioQueue.length===0){this.isPlaying=!1,K.update(s=>({...s,speakerState:"idle"}));return}if(!this.audioContext)return;this.isPlaying=!0;const t=this.audioQueue.shift(),n=this.audioContext.createBufferSource();n.buffer=t,n.connect(this.audioContext.destination),n.onended=()=>{this.currentSource=null,this.playNext()},this.currentSource=n,n.start()}async playChime(){if(!this.audioContext)return;if(this.audioContext.state==="suspended")try{await this.audioContext.resume()}catch{}const t=this.audioContext,n=t.currentTime,s=t.createGain();s.gain.setValueAtTime(1e-4,n),s.gain.exponentialRampToValueAtTime(.18,n+.02),s.gain.exponentialRampToValueAtTime(1e-4,n+.35),s.connect(t.destination);const r=t.createOscillator();r.type="sine",r.frequency.setValueAtTime(740,n),r.frequency.exponentialRampToValueAtTime(980,n+.12),r.connect(s),r.start(n),r.stop(n+.36)}stop(){if(this.currentSource)try{this.currentSource.stop(),this.currentSource=null}catch{}this.audioQueue=[],this.isPlaying=!1,K.update(t=>({...t,speakerState:"idle"}))}}const bn=new qo,vi={sttBackend:"moonshine-tiny",ttsEnabled:!0,vadThreshold:.5,silenceDurationMs:800,autoSend:!0,wakewordEnabled:!0,wakewordThreshold:.55,wakewordActiveWindowMs:1e4,showSettings:!1},gi=typeof localStorage<"u"?localStorage.getItem("jarvis-settings"):null,Uo=gi?{...vi,...JSON.parse(gi)}:vi,Ee=Rn(Uo);Ee.subscribe(e=>{if(typeof localStorage<"u"){const{showSettings:t,...n}=e;localStorage.setItem("jarvis-settings",JSON.stringify(n))}});function Ho(e){const t=new Int16Array(e.length);for(let r=0;r<e.length;r++){const i=Math.max(-1,Math.min(1,e[r]));t[r]=i<0?i*32768:i*32767}const n=new Uint8Array(t.buffer);let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return btoa(s)}class Wo{stream=null;audioContext=null;sourceNode=null;processorNode=null;running=!1;targetSampleRate=16e3;async start(){if(!this.running)try{const t=yn(Ee);this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:1}}),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.sourceNode=this.audioContext.createMediaStreamSource(this.stream),this.processorNode=this.audioContext.createScriptProcessor(2048,1,1);const s=this.audioContext.sampleRate/this.targetSampleRate;this.processorNode.onaudioprocess=r=>{if(!this.running)return;const i=r.inputBuffer.getChannelData(0);let a=0;for(let p=0;p<i.length;p++)a+=i[p]*i[p];const o=Math.sqrt(a/i.length),l=Math.min(100,o*450);K.update(p=>({...p,audioLevel:l,isVadActive:o>t.vadThreshold*.06}));const c=Math.floor(i.length/s),f=new Float32Array(c);for(let p=0;p<c;p++){const d=Math.floor(p*s);f[p]=i[d]||0}Jo(Ho(f),this.targetSampleRate)},this.sourceNode.connect(this.processorNode),this.processorNode.connect(this.audioContext.destination),ec({stt_backend:t.sttBackend,tts:t.ttsEnabled,wakeword:{enabled:t.wakewordEnabled,threshold:t.wakewordThreshold,active_window_ms:t.wakewordActiveWindowMs,models:["hey jarvis"]},vad:{energy_threshold:Math.max(.005,t.vadThreshold*.04),silence_duration_ms:t.silenceDurationMs,min_speech_ms:250}}),this.running=!0,K.update(r=>({...r,streaming:!0,currentTranscription:""})),Ia()}catch(t){console.error("Error starting streaming recorder:",t),this.stop()}}stop(){if(this.running=!1,this.processorNode){try{this.processorNode.disconnect()}catch{}this.processorNode.onaudioprocess=null,this.processorNode=null}if(this.sourceNode){try{this.sourceNode.disconnect()}catch{}this.sourceNode=null}this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null),K.update(t=>({...t,micState:"idle",audioLevel:0,isVadActive:!1,streaming:!1,wakewordActive:!1}))}}const Er=new Wo,Go={status:"idle",currentTask:"",progressFeed:[],toolEvents:[],queuedTask:"",dispatchCountdown:null,bridgeConfigured:!1,bridgeSessionId:"",dispatchEnabled:!1,contextMessages:0,contextChars:0,pulseToken:0},he=Rn(Go);let _i=0;function bi(e="evt"){return _i+=1,`${e}-${Date.now()}-${_i}`}const jo=`ws://${window.location.host}/ws/voice`,Vo=800,Yo=1e4,Zo=12;let ae=null,Zt=null,xr=null,Jn=null;function gt(){xr&&(clearInterval(xr),xr=null),he.update(e=>({...e,dispatchCountdown:null}))}function mi(e=10){gt();let t=e;he.update(n=>({...n,dispatchCountdown:t})),xr=window.setInterval(()=>{if(t-=1,t<=0){gt();return}he.update(n=>({...n,dispatchCountdown:t}))},1e3)}function Ma(){Jn&&(clearTimeout(Jn),Jn=null)}function ki(e,t=!1){Ma(),K.update(n=>({...n,wakewordActive:!0,wakewordPulse:t?n.wakewordPulse+1:n.wakewordPulse})),Jn=window.setTimeout(()=>{K.update(n=>({...n,wakewordActive:!1,micState:"idle",isVadActive:!1})),Jn=null},Math.max(1e3,e))}function Xo(){Ma(),K.update(e=>({...e,wakewordActive:!1}))}function Qo(e){const t=Math.min(Yo,Vo*Math.pow(2,e)),n=Math.floor(Math.random()*250);return t+n}function Da(){const e=yn(Me);if(!(e.ws?.readyState===WebSocket.OPEN||e.ws?.readyState===WebSocket.CONNECTING)){Me.update(t=>({...t,status:"connecting"}));try{ae=new WebSocket(jo),ae.onopen=()=>{Me.update(t=>({...t,ws:ae,status:"connected",reconnectAttempts:0})),Zt&&(clearTimeout(Zt),Zt=null),fetch("/api/bridge/status").then(t=>t.json()).then(t=>{he.update(n=>({...n,bridgeConfigured:!!t.configured,bridgeSessionId:t.session_id||"",dispatchEnabled:!!t.dispatch_enabled||!1,contextMessages:Number(t.context_messages||0),contextChars:Number(t.context_chars||0)}))}).catch(()=>{}),Er.start()},ae.onmessage=t=>{try{Ko(JSON.parse(t.data))}catch(n){console.error("Invalid WS message:",n)}},ae.onerror=t=>{console.error("WebSocket error:",t),Me.update(n=>({...n,status:"error"}))},ae.onclose=()=>{Me.update(n=>({...n,ws:null,status:"disconnected"})),bn.stop(),Er.stop(),gt();const t=yn(Me);if(t.reconnectAttempts<Zo){const n=Qo(t.reconnectAttempts);Zt=window.setTimeout(()=>{Me.update(s=>({...s,reconnectAttempts:s.reconnectAttempts+1})),Da()},n)}},Me.update(t=>({...t,ws:ae}))}catch(t){console.error("Failed to create WebSocket:",t),Me.update(n=>({...n,status:"error"}))}}}function Ko(e){switch(e.type){case"status":Me.update(t=>({...t,model:e.model||t.model,agentStatus:e.agent_status||t.agentStatus})),e.task_draft!==void 0&&Ue.update(t=>({...t,taskDraft:e.task_draft||""})),he.update(t=>({...t,status:e.agent_status||t.status,queuedTask:e.queued_task||t.queuedTask,bridgeConfigured:!!e.bridge?.configured||t.bridgeConfigured,bridgeSessionId:e.bridge?.session_id||t.bridgeSessionId,dispatchEnabled:!!e.bridge?.dispatch_enabled||t.dispatchEnabled,contextMessages:Number(e.bridge?.context_messages||t.contextMessages||0),contextChars:Number(e.bridge?.context_chars||t.contextChars||0)}));break;case"state":e.state==="listening"?K.update(t=>({...t,micState:"listening"})):e.state==="processing"?K.update(t=>({...t,micState:"processing"})):e.state==="speaking"?K.update(t=>({...t,speakerState:"speaking"})):e.state==="idle"&&K.update(t=>({...t,micState:"idle",speakerState:"idle",isVadActive:!1}));break;case"vad":{const t=yn(Ee).wakewordActiveWindowMs||15e3;e.event==="wakeword"&&(K.update(n=>({...n,isVadActive:!1})),bn.playChime(),ki(t,!0)),e.event==="speech_start"||e.event==="barge_in"?(K.update(n=>({...n,isVadActive:!0})),Xo(),K.update(n=>({...n,wakewordActive:!0})),bn.stop(),Ia()):e.event==="speech_end"&&(K.update(n=>({...n,isVadActive:!1})),ki(t,!1));break}case"transcription":K.update(t=>({...t,currentTranscription:e.text||""})),e.final&&e.text&&Ue.update(t=>({...t,messages:[...t.messages,{id:jr(),role:"user",content:e.text,timestamp:Date.now()}]}));break;case"text":Ue.update(t=>({...t,currentResponse:t.currentResponse+(e.content||""),isStreaming:!0}));break;case"reasoning":Ue.update(t=>({...t,currentReasoning:t.currentReasoning+(e.content||"")}));break;case"action":Ue.update(t=>({...t,taskDraft:e.task_draft??t.taskDraft})),he.update(t=>({...t,queuedTask:e.queued_task??t.queuedTask,pulseToken:Date.now()})),e.action==="queued"&&e.queued_task?mi(10):(e.action==="buffer"||e.action==="buffer_cleared"||e.action==="stop")&&gt();break;case"audio":bn.playChunk(e.content,e.sample_rate||24e3);break;case"agent_status":he.update(t=>({...t,status:e.status||t.status,currentTask:e.current_task||""})),e.status==="busy"&&gt();break;case"agent_progress":he.update(t=>({...t,progressFeed:[...t.progressFeed,{id:bi("progress"),state:e.state||"running",progress:Number(e.progress||0),title:e.title||"Update",content:e.content||"",timestamp:Date.now()}].slice(-20)}));break;case"tool_called":he.update(t=>({...t,pulseToken:Date.now(),toolEvents:[{id:bi("tool"),tool:e.tool||"unknown",task:e.task||"",timestamp:Date.now()},...t.toolEvents].slice(0,12)}));break;case"agent_brief":e.content&&Ue.update(t=>({...t,messages:[...t.messages,{id:jr(),role:"assistant",content:e.content,timestamp:Date.now()}]})),gt();break;case"dispatch_ready":gt(),he.update(t=>({...t,queuedTask:e.task||t.queuedTask,pulseToken:Date.now()}));break;case"context_size":he.update(t=>({...t,contextMessages:Number(e.messages||0),contextChars:Number(e.chars||0)}));break;case"bridge_status":he.update(t=>({...t,bridgeConfigured:!!e.configured,bridgeSessionId:e.session_id||"",dispatchEnabled:!!e.dispatch_enabled||!1}));break;case"done":{yn(Ue).currentResponse&&Ue.update(n=>({...n,messages:[...n.messages,{id:jr(),role:"assistant",content:n.currentResponse,timestamp:Date.now(),reasoning:n.currentReasoning||void 0}],currentResponse:"",currentReasoning:"",isStreaming:!1,taskDraft:e.task_draft||n.taskDraft})),Me.update(n=>({...n,agentStatus:e.agent_status||n.agentStatus})),he.update(n=>({...n,status:e.agent_status||n.status,queuedTask:e.queued_task??n.queuedTask,bridgeConfigured:!!e.bridge?.configured||n.bridgeConfigured,bridgeSessionId:e.bridge?.session_id||n.bridgeSessionId,dispatchEnabled:!!e.bridge?.dispatch_enabled||n.dispatchEnabled,contextMessages:Number(e.bridge?.context_messages||n.contextMessages||0),contextChars:Number(e.bridge?.context_chars||n.contextChars||0)})),e.queued_task&&e.agent_status==="idle"?mi(10):(!e.queued_task||e.agent_status==="busy")&&gt();break}case"cancelled":Ue.update(t=>({...t,currentResponse:"",currentReasoning:"",isStreaming:!1})),bn.stop();break;case"error":console.error("WS error event:",e.message||e.content||e);break}}function Jo(e,t=16e3){!ae||ae.readyState!==WebSocket.OPEN||ae.send(JSON.stringify({type:"audio_chunk",data:e,sample_rate:t}))}function ec(e){!ae||ae.readyState!==WebSocket.OPEN||ae.send(JSON.stringify({type:"config",...e}))}function Ia(){!ae||ae.readyState!==WebSocket.OPEN||(ae.send(JSON.stringify({type:"cancel"})),bn.stop())}function tc(){ae&&(ae.close(),ae=null),Zt&&(clearTimeout(Zt),Zt=null),gt()}var nc=O('<span class="model-badge svelte-1piydef"> </span>'),rc=O('<div class="status-bar svelte-1piydef"><div class="status-group svelte-1piydef"><div class="status-indicator svelte-1piydef"></div> <span class="status-text svelte-1piydef"> </span></div> <div class="info-group svelte-1piydef"><!> <span class="activity svelte-1piydef"> </span> <span> </span></div> <div class="actions svelte-1piydef"><button class="settings-button svelte-1piydef" aria-label="Settings"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="svelte-1piydef"><line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="18" x2="20" y2="18"></line><circle cx="9" cy="6" r="2" fill="currentColor" stroke="none"></circle><circle cx="15" cy="12" r="2" fill="currentColor" stroke="none"></circle><circle cx="11" cy="18" r="2" fill="currentColor" stroke="none"></circle></svg></button></div></div>');function sc(e,t){st(t,!1);const n=()=>Qe(Me,"$connection",i),s=()=>Qe(K,"$audio",i),r=()=>Qe(he,"$agentPanel",i),[i,a]=$t(),o=te(),l=te(),c=te();function f(){Ee.update(j=>({...j,showSettings:!j.showSettings}))}ve(()=>n(),()=>{q(o,n().status==="connected"?"#10b981":n().status==="connecting"?"#eab308":n().status==="error"?"#ef4444":"#64748b")}),ve(()=>n(),()=>{q(l,n().status==="connected"?"Connected":n().status==="connecting"?"Connecting...":n().status==="error"?"Connection Error":"Disconnected")}),ve(()=>(s(),n()),()=>{q(c,s().speakerState==="speaking"?"Speaking":s().micState==="listening"?"Listening":s().micState==="processing"?"Processing":n().agentStatus||"Idle")}),an(),xt();var p=rc(),d=b(p),v=b(d),h=x(v,2),k=b(h),g=x(d,2),E=b(g);{var D=j=>{var G=nc(),oe=b(G);J(()=>Y(oe,(n(),S(()=>n().model)))),M(j,G)};ge(E,j=>{n(),S(()=>n().model)&&j(D)})}var y=x(E,2),w=b(y),R=x(y,2);let C;var X=b(R),W=x(g,2),_e=b(W);J(()=>{Cs(v,`background-color: ${m(o)??""}`),Y(k,m(l)),Y(w,m(c)),C=kt(R,1,"bridgeBadge svelte-1piydef",null,C,{on:r().bridgeConfigured}),Y(X,(r(),S(()=>r().bridgeConfigured?"Agent linked":"Mock/offline")))}),We("click",_e,f),M(e,p),it(),a()}function Ms(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ln=Ms();function La(e){ln=e}var Gt={exec:()=>null};function L(e,t=""){let n=typeof e=="string"?e:e.source,s={replace:(r,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(me.caret,"$1"),n=n.replace(r,a),s},getRegex:()=>new RegExp(n,t)};return s}var ic=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),me={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i"),blockquoteBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}>`)},ac=/^(?:[ \t]*(?:\n|$))+/,lc=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,oc=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,or=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,cc=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ds=/ {0,3}(?:[*+-]|\d{1,9}[.)])/,Oa=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Pa=L(Oa).replace(/bull/g,Ds).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),uc=L(Oa).replace(/bull/g,Ds).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Is=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,fc=/^[^\n]+/,Ls=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,dc=L(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ls).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),pc=L(/^(bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ds).getRegex(),Or="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Os=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,hc=L("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Os).replace("tag",Or).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$a=L(Is).replace("hr",or).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Or).getRegex(),vc=L(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$a).getRegex(),Ps={blockquote:vc,code:lc,def:dc,fences:oc,heading:cc,hr:or,html:hc,lheading:Pa,list:pc,newline:ac,paragraph:$a,table:Gt,text:fc},wi=L("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",or).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Or).getRegex(),gc={...Ps,lheading:uc,table:wi,paragraph:L(Is).replace("hr",or).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",wi).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Or).getRegex()},_c={...Ps,html:L(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Os).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Gt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:L(Is).replace("hr",or).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Pa).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},bc=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,mc=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,za=/^( {2,}|\\)\n(?!\s*$)/,kc=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pr=/[\p{P}\p{S}]/u,$s=/[\s\p{P}\p{S}]/u,Fa=/[^\s\p{P}\p{S}]/u,wc=L(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,$s).getRegex(),Ba=/(?!~)[\p{P}\p{S}]/u,xc=/(?!~)[\s\p{P}\p{S}]/u,yc=/(?:[^\s\p{P}\p{S}]|~)/u,qa=/(?![*_])[\p{P}\p{S}]/u,Tc=/(?![*_])[\s\p{P}\p{S}]/u,Sc=/(?:[^\s\p{P}\p{S}]|[*_])/u,Ec=L(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",ic?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Ua=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ac=L(Ua,"u").replace(/punct/g,Pr).getRegex(),Rc=L(Ua,"u").replace(/punct/g,Ba).getRegex(),Ha="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Cc=L(Ha,"gu").replace(/notPunctSpace/g,Fa).replace(/punctSpace/g,$s).replace(/punct/g,Pr).getRegex(),Nc=L(Ha,"gu").replace(/notPunctSpace/g,yc).replace(/punctSpace/g,xc).replace(/punct/g,Ba).getRegex(),Mc=L("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Fa).replace(/punctSpace/g,$s).replace(/punct/g,Pr).getRegex(),Dc=L(/^~~?(?:((?!~)punct)|[^\s~])/,"u").replace(/punct/g,qa).getRegex(),Ic="^[^~]+(?=[^~])|(?!~)punct(~~?)(?=[\\s]|$)|notPunctSpace(~~?)(?!~)(?=punctSpace|$)|(?!~)punctSpace(~~?)(?=notPunctSpace)|[\\s](~~?)(?!~)(?=punct)|(?!~)punct(~~?)(?!~)(?=punct)|notPunctSpace(~~?)(?=notPunctSpace)",Lc=L(Ic,"gu").replace(/notPunctSpace/g,Sc).replace(/punctSpace/g,Tc).replace(/punct/g,qa).getRegex(),Oc=L(/\\(punct)/,"gu").replace(/punct/g,Pr).getRegex(),Pc=L(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$c=L(Os).replace("(?:-->|$)","-->").getRegex(),zc=L("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$c).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ar=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Fc=L(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Ar).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Wa=L(/^!?\[(label)\]\[(ref)\]/).replace("label",Ar).replace("ref",Ls).getRegex(),Ga=L(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ls).getRegex(),Bc=L("reflink|nolink(?!\\()","g").replace("reflink",Wa).replace("nolink",Ga).getRegex(),xi=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,zs={_backpedal:Gt,anyPunctuation:Oc,autolink:Pc,blockSkip:Ec,br:za,code:mc,del:Gt,delLDelim:Gt,delRDelim:Gt,emStrongLDelim:Ac,emStrongRDelimAst:Cc,emStrongRDelimUnd:Mc,escape:bc,link:Fc,nolink:Ga,punctuation:wc,reflink:Wa,reflinkSearch:Bc,tag:zc,text:kc,url:Gt},qc={...zs,link:L(/^!?\[(label)\]\((.*?)\)/).replace("label",Ar).getRegex(),reflink:L(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ar).getRegex()},us={...zs,emStrongRDelimAst:Nc,emStrongLDelim:Rc,delLDelim:Dc,delRDelim:Lc,url:L(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",xi).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:L(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",xi).getRegex()},Uc={...us,br:L(za).replace("{2,}","*").getRegex(),text:L(us.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},br={normal:Ps,gfm:gc,pedantic:_c},Fn={normal:zs,gfm:us,breaks:Uc,pedantic:qc},Hc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yi=e=>Hc[e];function et(e,t){if(t){if(me.escapeTest.test(e))return e.replace(me.escapeReplace,yi)}else if(me.escapeTestNoEncode.test(e))return e.replace(me.escapeReplaceNoEncode,yi);return e}function Ti(e){try{e=encodeURI(e).replace(me.percentDecode,"%")}catch{return null}return e}function Si(e,t){let n=e.replace(me.findPipe,(i,a,o)=>{let l=!1,c=a;for(;--c>=0&&o[c]==="\\";)l=!l;return l?"|":" |"}),s=n.split(me.splitPipe),r=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(me.slashPipe,"|");return s}function Bn(e,t,n){let s=e.length;if(s===0)return"";let r=0;for(;r<s&&e.charAt(s-r-1)===t;)r++;return e.slice(0,s-r)}function Wc(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return n>0?-2:-1}function Gc(e,t=0){let n=t,s="";for(let r of e)if(r==="	"){let i=4-n%4;s+=" ".repeat(i),n+=i}else s+=r,n++;return s}function Ei(e,t,n,s,r){let i=t.href,a=t.title||null,o=e[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:a,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,l}function jc(e,t,n){let s=e.match(n.other.indentCodeCompensation);if(s===null)return t;let r=s[1];return t.split(`
`).map(i=>{let a=i.match(n.other.beginningSpace);if(a===null)return i;let[o]=a;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var Rr=class{options;rules;lexer;constructor(e){this.options=e||ln}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Bn(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],s=jc(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let s=Bn(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Bn(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Bn(t[0],`
`).split(`
`),s="",r="",i=[];for(;n.length>0;){let a=!1,o=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))o.push(n[l]),a=!0;else if(!a)o.push(n[l]);else break;n=n.slice(l);let c=o.join(`
`),f=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${c}`:c,r=r?`${r}
${f}`:f;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,i,!0),this.lexer.state.top=p,n.length===0)break;let d=i.at(-1);if(d?.type==="code")break;if(d?.type==="blockquote"){let v=d,h=v.raw+`
`+n.join(`
`),k=this.blockquote(h);i[i.length-1]=k,s=s.substring(0,s.length-v.raw.length)+k.raw,r=r.substring(0,r.length-v.text.length)+k.text;break}else if(d?.type==="list"){let v=d,h=v.raw+`
`+n.join(`
`),k=this.list(h);i[i.length-1]=k,s=s.substring(0,s.length-d.raw.length)+k.raw,r=r.substring(0,r.length-v.raw.length)+k.raw,n=h.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),s=n.length>1,r={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");let i=this.rules.other.listItemRegex(n),a=!1;for(;e;){let l=!1,c="",f="";if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let p=Gc(t[2].split(`
`,1)[0],t[1].length),d=e.split(`
`,1)[0],v=!p.trim(),h=0;if(this.options.pedantic?(h=2,f=p.trimStart()):v?h=t[1].length+1:(h=p.search(this.rules.other.nonSpaceChar),h=h>4?1:h,f=p.slice(h),h+=t[1].length),v&&this.rules.other.blankLine.test(d)&&(c+=d+`
`,e=e.substring(d.length+1),l=!0),!l){let k=this.rules.other.nextBulletRegex(h),g=this.rules.other.hrRegex(h),E=this.rules.other.fencesBeginRegex(h),D=this.rules.other.headingBeginRegex(h),y=this.rules.other.htmlBeginRegex(h),w=this.rules.other.blockquoteBeginRegex(h);for(;e;){let R=e.split(`
`,1)[0],C;if(d=R,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),C=d):C=d.replace(this.rules.other.tabCharGlobal,"    "),E.test(d)||D.test(d)||y.test(d)||w.test(d)||k.test(d)||g.test(d))break;if(C.search(this.rules.other.nonSpaceChar)>=h||!d.trim())f+=`
`+C.slice(h);else{if(v||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(p)||D.test(p)||g.test(p))break;f+=`
`+d}v=!d.trim(),c+=R+`
`,e=e.substring(R.length+1),p=C.slice(h)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0)),r.items.push({type:"list_item",raw:c,task:!!this.options.gfm&&this.rules.other.listIsTask.test(f),loose:!1,text:f,tokens:[]}),r.raw+=c}let o=r.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let l of r.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let f=this.lexer.inlineQueue.length-1;f>=0;f--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[f].src)){this.lexer.inlineQueue[f].src=this.lexer.inlineQueue[f].src.replace(this.rules.other.listReplaceTask,"");break}}let c=this.rules.other.listTaskCheckbox.exec(l.raw);if(c){let f={type:"checkbox",raw:c[0]+" ",checked:c[0]!=="[ ]"};l.checked=f.checked,r.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=f.raw+l.tokens[0].raw,l.tokens[0].text=f.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(f)):l.tokens.unshift({type:"paragraph",raw:f.raw,text:f.raw,tokens:[f]}):l.tokens.unshift(f)}}if(!r.loose){let c=l.tokens.filter(p=>p.type==="space"),f=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=f}}if(r.loose)for(let l of r.items){l.loose=!0;for(let c of l.tokens)c.type==="text"&&(c.type="paragraph")}return r}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:r}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=Si(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(let a of s)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<n.length;a++)i.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:i.align[a]});for(let a of r)i.rows.push(Si(a,i.header.length).map((o,l)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:i.align[l]})));return i}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let i=Bn(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{let i=Wc(t[2],"()");if(i===-2)return;if(i>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],r="";if(this.options.pedantic){let i=this.rules.other.pedanticHrefTitle.exec(s);i&&(s=i[1],r=i[3])}else r=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),Ei(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[s.toLowerCase()];if(!r){let i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return Ei(n,r,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){let r=[...s[0]].length-1,i,a,o=r,l=0,c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+r);(s=c.exec(t))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(a=[...i].length,s[3]||s[4]){o+=a;continue}else if((s[5]||s[6])&&r%3&&!((r+a)%3)){l+=a;continue}if(o-=a,o>0)continue;a=Math.min(a,a+o+l);let f=[...s[0]][0].length,p=e.slice(0,r+s.index+f+a);if(Math.min(r,a)%2){let v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}let d=p.slice(2,-2);return{type:"strong",raw:p,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e,t,n=""){let s=this.rules.inline.delLDelim.exec(e);if(s&&(!s[1]||!n||this.rules.inline.punctuation.exec(n))){let r=[...s[0]].length-1,i,a,o=r,l=this.rules.inline.delRDelim;for(l.lastIndex=0,t=t.slice(-1*e.length+r);(s=l.exec(t))!=null;){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i||(a=[...i].length,a!==r))continue;if(s[3]||s[4]){o+=a;continue}if(o-=a,o>0)continue;a=Math.min(a,a+o);let c=[...s[0]][0].length,f=e.slice(0,r+s.index+c+a),p=f.slice(r,-r);return{type:"del",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=t[1],s="mailto:"+n):(n=t[1],s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,s;if(t[2]==="@")n=t[0],s="mailto:"+n;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);n=t[0],t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},je=class fs{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ln,this.options.tokenizer=this.options.tokenizer||new Rr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:me,block:br.normal,inline:Fn.normal};this.options.pedantic?(n.block=br.pedantic,n.inline=Fn.pedantic):this.options.gfm&&(n.block=br.gfm,this.options.breaks?n.inline=Fn.breaks:n.inline=Fn.gfm),this.tokenizer.rules=n}static get rules(){return{block:br,inline:Fn}}static lex(t,n){return new fs(n).lex(t)}static lexInline(t,n){return new fs(n).inlineTokens(t)}lex(t){t=t.replace(me.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],s=!1){for(this.options.pedantic&&(t=t.replace(me.tabCharGlobal,"    ").replace(me.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some(a=>(r=a.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let a=n.at(-1);r.raw.length===1&&a!==void 0?a.raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let a=n.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+r.raw,a.text+=`
`+r.text,this.inlineQueue.at(-1).src=a.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let a=n.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+r.raw,a.text+=`
`+r.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},n.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}let i=t;if(this.options.extensions?.startBlock){let a=1/0,o=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},o),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(i=t.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let a=n.at(-1);s&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+r.raw,a.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):n.push(r),s=i.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let a=n.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+r.raw,a.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):n.push(r);continue}if(t){let a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let s=t,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i;for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)i=r[2]?r[2].length:0,s=s.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let a=!1,o="";for(;t;){a||(o=""),a=!1;let l;if(this.options.extensions?.inline?.some(f=>(l=f.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let f=n.at(-1);l.type==="text"&&f?.type==="text"?(f.raw+=l.raw,f.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,s,o)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t,s,o)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let c=t;if(this.options.extensions?.startInline){let f=1/0,p=t.slice(1),d;this.options.extensions.startInline.forEach(v=>{d=v.call({lexer:this},p),typeof d=="number"&&d>=0&&(f=Math.min(f,d))}),f<1/0&&f>=0&&(c=t.substring(0,f+1))}if(l=this.tokenizer.inlineText(c)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),a=!0;let f=n.at(-1);f?.type==="text"?(f.raw+=l.raw,f.text+=l.text):n.push(l);continue}if(t){let f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}},Cr=class{options;parser;constructor(e){this.options=e||ln}space(e){return""}code({text:e,lang:t,escaped:n}){let s=(t||"").match(me.notSpaceStart)?.[0],r=e.replace(me.endingNewline,"")+`
`;return s?'<pre><code class="language-'+et(s)+'">'+(n?r:et(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:et(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,s="";for(let a=0;a<e.items.length;a++){let o=e.items[a];s+=this.listitem(o)}let r=t?"ol":"ul",i=t&&n!==1?' start="'+n+'"':"";return"<"+r+i+`>
`+s+"</"+r+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let r=0;r<e.header.length;r++)n+=this.tablecell(e.header[r]);t+=this.tablerow({text:n});let s="";for(let r=0;r<e.rows.length;r++){let i=e.rows[r];n="";for(let a=0;a<i.length;a++)n+=this.tablecell(i[a]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${et(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let s=this.parser.parseInline(n),r=Ti(e);if(r===null)return s;e=r;let i='<a href="'+e+'"';return t&&(i+=' title="'+et(t)+'"'),i+=">"+s+"</a>",i}image({href:e,title:t,text:n,tokens:s}){s&&(n=this.parser.parseInline(s,this.parser.textRenderer));let r=Ti(e);if(r===null)return et(n);e=r;let i=`<img src="${e}" alt="${et(n)}"`;return t&&(i+=` title="${et(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:et(e.text)}},Fs=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},Ve=class ds{options;renderer;textRenderer;constructor(t){this.options=t||ln,this.options.renderer=this.options.renderer||new Cr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Fs}static parse(t,n){return new ds(n).parse(t)}static parseInline(t,n){return new ds(n).parseInline(t)}parse(t){let n="";for(let s=0;s<t.length;s++){let r=t[s];if(this.options.extensions?.renderers?.[r.type]){let a=r,o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){n+=o||"";continue}}let i=r;switch(i.type){case"space":{n+=this.renderer.space(i);break}case"hr":{n+=this.renderer.hr(i);break}case"heading":{n+=this.renderer.heading(i);break}case"code":{n+=this.renderer.code(i);break}case"table":{n+=this.renderer.table(i);break}case"blockquote":{n+=this.renderer.blockquote(i);break}case"list":{n+=this.renderer.list(i);break}case"checkbox":{n+=this.renderer.checkbox(i);break}case"html":{n+=this.renderer.html(i);break}case"def":{n+=this.renderer.def(i);break}case"paragraph":{n+=this.renderer.paragraph(i);break}case"text":{n+=this.renderer.text(i);break}default:{let a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(t,n=this.renderer){let s="";for(let r=0;r<t.length;r++){let i=t[r];if(this.options.extensions?.renderers?.[i.type]){let o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=o||"";continue}}let a=i;switch(a.type){case"escape":{s+=n.text(a);break}case"html":{s+=n.html(a);break}case"link":{s+=n.link(a);break}case"image":{s+=n.image(a);break}case"checkbox":{s+=n.checkbox(a);break}case"strong":{s+=n.strong(a);break}case"em":{s+=n.em(a);break}case"codespan":{s+=n.codespan(a);break}case"br":{s+=n.br(a);break}case"del":{s+=n.del(a);break}case"text":{s+=n.text(a);break}default:{let o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}},Yn=class{options;block;constructor(e){this.options=e||ln}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?je.lex:je.lexInline}provideParser(){return this.block?Ve.parse:Ve.parseInline}},Vc=class{defaults=Ms();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ve;Renderer=Cr;TextRenderer=Fs;Lexer=je;Tokenizer=Rr;Hooks=Yn;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{let r=s;for(let i of r.header)n=n.concat(this.walkTokens(i.tokens,t));for(let i of r.rows)for(let a of i)n=n.concat(this.walkTokens(a.tokens,t));break}case"list":{let r=s;n=n.concat(this.walkTokens(r.items,t));break}default:{let r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(i=>{let a=r[i].flat(1/0);n=n.concat(this.walkTokens(a,t))}):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let i=t.renderers[r.name];i?t.renderers[r.name]=function(...a){let o=r.renderer.apply(this,a);return o===!1&&(o=i.apply(this,a)),o}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let i=t[r.level];i?i.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),s.extensions=t),n.renderer){let r=this.defaults.renderer||new Cr(this.defaults);for(let i in n.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let a=i,o=n.renderer[a],l=r[a];r[a]=(...c)=>{let f=o.apply(r,c);return f===!1&&(f=l.apply(r,c)),f||""}}s.renderer=r}if(n.tokenizer){let r=this.defaults.tokenizer||new Rr(this.defaults);for(let i in n.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let a=i,o=n.tokenizer[a],l=r[a];r[a]=(...c)=>{let f=o.apply(r,c);return f===!1&&(f=l.apply(r,c)),f}}s.tokenizer=r}if(n.hooks){let r=this.defaults.hooks||new Yn;for(let i in n.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let a=i,o=n.hooks[a],l=r[a];Yn.passThroughHooks.has(i)?r[a]=c=>{if(this.defaults.async&&Yn.passThroughHooksRespectAsync.has(i))return(async()=>{let p=await o.call(r,c);return l.call(r,p)})();let f=o.call(r,c);return l.call(r,f)}:r[a]=(...c)=>{if(this.defaults.async)return(async()=>{let p=await o.apply(r,c);return p===!1&&(p=await l.apply(r,c)),p})();let f=o.apply(r,c);return f===!1&&(f=l.apply(r,c)),f}}s.hooks=r}if(n.walkTokens){let r=this.defaults.walkTokens,i=n.walkTokens;s.walkTokens=function(a){let o=[];return o.push(i.call(this,a)),r&&(o=o.concat(r.call(this,a))),o}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return je.lex(e,t??this.defaults)}parser(e,t){return Ve.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let s={...n},r={...this.defaults,...s},i=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&s.async===!1)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return i(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=e),r.async)return(async()=>{let a=r.hooks?await r.hooks.preprocess(t):t,o=await(r.hooks?await r.hooks.provideLexer():e?je.lex:je.lexInline)(a,r),l=r.hooks?await r.hooks.processAllTokens(o):o;r.walkTokens&&await Promise.all(this.walkTokens(l,r.walkTokens));let c=await(r.hooks?await r.hooks.provideParser():e?Ve.parse:Ve.parseInline)(l,r);return r.hooks?await r.hooks.postprocess(c):c})().catch(i);try{r.hooks&&(t=r.hooks.preprocess(t));let a=(r.hooks?r.hooks.provideLexer():e?je.lex:je.lexInline)(t,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let o=(r.hooks?r.hooks.provideParser():e?Ve.parse:Ve.parseInline)(a,r);return r.hooks&&(o=r.hooks.postprocess(o)),o}catch(a){return i(a)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let s="<p>An error occurred:</p><pre>"+et(n.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(n);throw n}}},rn=new Vc;function H(e,t){return rn.parse(e,t)}H.options=H.setOptions=function(e){return rn.setOptions(e),H.defaults=rn.defaults,La(H.defaults),H};H.getDefaults=Ms;H.defaults=ln;H.use=function(...e){return rn.use(...e),H.defaults=rn.defaults,La(H.defaults),H};H.walkTokens=function(e,t){return rn.walkTokens(e,t)};H.parseInline=rn.parseInline;H.Parser=Ve;H.parser=Ve.parse;H.Renderer=Cr;H.TextRenderer=Fs;H.Lexer=je;H.lexer=je.lex;H.Tokenizer=Rr;H.Hooks=Yn;H.parse=H;H.options;H.setOptions;H.use;H.walkTokens;H.parseInline;Ve.parse;je.lex;const{entries:ja,setPrototypeOf:Ai,isFrozen:Yc,getPrototypeOf:Zc,getOwnPropertyDescriptor:Xc}=Object;let{freeze:ke,seal:Fe,create:ps}=Object,{apply:hs,construct:vs}=typeof Reflect<"u"&&Reflect;ke||(ke=function(t){return t});Fe||(Fe=function(t){return t});hs||(hs=function(t,n){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];return t.apply(n,r)});vs||(vs=function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return new t(...s)});const mr=we(Array.prototype.forEach),Qc=we(Array.prototype.lastIndexOf),Ri=we(Array.prototype.pop),qn=we(Array.prototype.push),Kc=we(Array.prototype.splice),yr=we(String.prototype.toLowerCase),Vr=we(String.prototype.toString),Yr=we(String.prototype.match),Un=we(String.prototype.replace),Jc=we(String.prototype.indexOf),eu=we(String.prototype.trim),He=we(Object.prototype.hasOwnProperty),be=we(RegExp.prototype.test),Hn=tu(TypeError);function we(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return hs(e,t,s)}}function tu(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return vs(e,n)}}function N(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yr;Ai&&Ai(e,null);let s=t.length;for(;s--;){let r=t[s];if(typeof r=="string"){const i=n(r);i!==r&&(Yc(t)||(t[s]=i),r=i)}e[r]=!0}return e}function nu(e){for(let t=0;t<e.length;t++)He(e,t)||(e[t]=null);return e}function tt(e){const t=ps(null);for(const[n,s]of ja(e))He(e,n)&&(Array.isArray(s)?t[n]=nu(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=tt(s):t[n]=s);return t}function Wn(e,t){for(;e!==null;){const s=Xc(e,t);if(s){if(s.get)return we(s.get);if(typeof s.value=="function")return we(s.value)}e=Zc(e)}function n(){return null}return n}const Ci=ke(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Zr=ke(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Xr=ke(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ru=ke(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qr=ke(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),su=ke(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ni=ke(["#text"]),Mi=ke(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Kr=ke(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Di=ke(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),kr=ke(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),iu=Fe(/\{\{[\w\W]*|[\w\W]*\}\}/gm),au=Fe(/<%[\w\W]*|[\w\W]*%>/gm),lu=Fe(/\$\{[\w\W]*/gm),ou=Fe(/^data-[\-\w.\u00B7-\uFFFF]+$/),cu=Fe(/^aria-[\-\w]+$/),Va=Fe(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),uu=Fe(/^(?:\w+script|data):/i),fu=Fe(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ya=Fe(/^html$/i),du=Fe(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ii=Object.freeze({__proto__:null,ARIA_ATTR:cu,ATTR_WHITESPACE:fu,CUSTOM_ELEMENT:du,DATA_ATTR:ou,DOCTYPE_NAME:Ya,ERB_EXPR:au,IS_ALLOWED_URI:Va,IS_SCRIPT_OR_DATA:uu,MUSTACHE_EXPR:iu,TMPLIT_EXPR:lu});const Gn={element:1,text:3,progressingInstruction:7,comment:8,document:9},pu=function(){return typeof window>"u"?null:window},hu=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(s=n.getAttribute(r));const i="dompurify"+(s?"#"+s:"");try{return t.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Li=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Za(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pu();const t=A=>Za(A);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==Gn.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const s=n,r=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:d,trustedTypes:v}=e,h=l.prototype,k=Wn(h,"cloneNode"),g=Wn(h,"remove"),E=Wn(h,"nextSibling"),D=Wn(h,"childNodes"),y=Wn(h,"parentNode");if(typeof a=="function"){const A=n.createElement("template");A.content&&A.content.ownerDocument&&(n=A.content.ownerDocument)}let w,R="";const{implementation:C,createNodeIterator:X,createDocumentFragment:W,getElementsByTagName:_e}=n,{importNode:j}=s;let G=Li();t.isSupported=typeof ja=="function"&&typeof y=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:oe,ERB_EXPR:xe,TMPLIT_EXPR:lt,DATA_ATTR:zt,ARIA_ATTR:on,IS_SCRIPT_OR_DATA:Q,ATTR_WHITESPACE:ne,CUSTOM_ELEMENT:ye}=Ii;let{IS_ALLOWED_URI:se}=Ii,P=null;const Be=N({},[...Ci,...Zr,...Xr,...Qr,...Ni]);let U=null;const ot=N({},[...Mi,...Kr,...Di,...kr]);let $=Object.seal(ps(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Te=null,ct=null;const yt=Object.seal(ps(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Cn=!0,Nn=!0,cr=!1,Mn=!0,Tt=!1,Ft=!0,ut=!1,Dn=!1,cn=!1,St=!1,Bt=!1,un=!1,ur=!0,In=!1;const fr="user-content-";let fn=!0,qt=!1,ft={},Ie=null;const Ln=N({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let On=null;const dr=N({},["audio","video","img","source","image","track"]);let dn=null;const pr=N({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pn="http://www.w3.org/1998/Math/MathML",Ut="http://www.w3.org/2000/svg",qe="http://www.w3.org/1999/xhtml";let B=qe,dt=!1,Et=null;const $r=N({},[pn,Ut,qe],Vr);let Ht=N({},["mi","mo","mn","ms","mtext"]),hr=N({},["annotation-xml"]);const Xa=N({},["title","style","font","a","script"]);let Pn=null;const Qa=["application/xhtml+xml","text/html"],Ka="text/html";let ie=null,hn=null;const Ja=n.createElement("form"),Bs=function(u){return u instanceof RegExp||u instanceof Function},zr=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(hn&&hn===u)){if((!u||typeof u!="object")&&(u={}),u=tt(u),Pn=Qa.indexOf(u.PARSER_MEDIA_TYPE)===-1?Ka:u.PARSER_MEDIA_TYPE,ie=Pn==="application/xhtml+xml"?Vr:yr,P=He(u,"ALLOWED_TAGS")?N({},u.ALLOWED_TAGS,ie):Be,U=He(u,"ALLOWED_ATTR")?N({},u.ALLOWED_ATTR,ie):ot,Et=He(u,"ALLOWED_NAMESPACES")?N({},u.ALLOWED_NAMESPACES,Vr):$r,dn=He(u,"ADD_URI_SAFE_ATTR")?N(tt(pr),u.ADD_URI_SAFE_ATTR,ie):pr,On=He(u,"ADD_DATA_URI_TAGS")?N(tt(dr),u.ADD_DATA_URI_TAGS,ie):dr,Ie=He(u,"FORBID_CONTENTS")?N({},u.FORBID_CONTENTS,ie):Ln,Te=He(u,"FORBID_TAGS")?N({},u.FORBID_TAGS,ie):tt({}),ct=He(u,"FORBID_ATTR")?N({},u.FORBID_ATTR,ie):tt({}),ft=He(u,"USE_PROFILES")?u.USE_PROFILES:!1,Cn=u.ALLOW_ARIA_ATTR!==!1,Nn=u.ALLOW_DATA_ATTR!==!1,cr=u.ALLOW_UNKNOWN_PROTOCOLS||!1,Mn=u.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Tt=u.SAFE_FOR_TEMPLATES||!1,Ft=u.SAFE_FOR_XML!==!1,ut=u.WHOLE_DOCUMENT||!1,St=u.RETURN_DOM||!1,Bt=u.RETURN_DOM_FRAGMENT||!1,un=u.RETURN_TRUSTED_TYPE||!1,cn=u.FORCE_BODY||!1,ur=u.SANITIZE_DOM!==!1,In=u.SANITIZE_NAMED_PROPS||!1,fn=u.KEEP_CONTENT!==!1,qt=u.IN_PLACE||!1,se=u.ALLOWED_URI_REGEXP||Va,B=u.NAMESPACE||qe,Ht=u.MATHML_TEXT_INTEGRATION_POINTS||Ht,hr=u.HTML_INTEGRATION_POINTS||hr,$=u.CUSTOM_ELEMENT_HANDLING||{},u.CUSTOM_ELEMENT_HANDLING&&Bs(u.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=u.CUSTOM_ELEMENT_HANDLING.tagNameCheck),u.CUSTOM_ELEMENT_HANDLING&&Bs(u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),u.CUSTOM_ELEMENT_HANDLING&&typeof u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($.allowCustomizedBuiltInElements=u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Tt&&(Nn=!1),Bt&&(St=!0),ft&&(P=N({},Ni),U=[],ft.html===!0&&(N(P,Ci),N(U,Mi)),ft.svg===!0&&(N(P,Zr),N(U,Kr),N(U,kr)),ft.svgFilters===!0&&(N(P,Xr),N(U,Kr),N(U,kr)),ft.mathMl===!0&&(N(P,Qr),N(U,Di),N(U,kr))),u.ADD_TAGS&&(typeof u.ADD_TAGS=="function"?yt.tagCheck=u.ADD_TAGS:(P===Be&&(P=tt(P)),N(P,u.ADD_TAGS,ie))),u.ADD_ATTR&&(typeof u.ADD_ATTR=="function"?yt.attributeCheck=u.ADD_ATTR:(U===ot&&(U=tt(U)),N(U,u.ADD_ATTR,ie))),u.ADD_URI_SAFE_ATTR&&N(dn,u.ADD_URI_SAFE_ATTR,ie),u.FORBID_CONTENTS&&(Ie===Ln&&(Ie=tt(Ie)),N(Ie,u.FORBID_CONTENTS,ie)),u.ADD_FORBID_CONTENTS&&(Ie===Ln&&(Ie=tt(Ie)),N(Ie,u.ADD_FORBID_CONTENTS,ie)),fn&&(P["#text"]=!0),ut&&N(P,["html","head","body"]),P.table&&(N(P,["tbody"]),delete Te.tbody),u.TRUSTED_TYPES_POLICY){if(typeof u.TRUSTED_TYPES_POLICY.createHTML!="function")throw Hn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof u.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Hn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=u.TRUSTED_TYPES_POLICY,R=w.createHTML("")}else w===void 0&&(w=hu(v,r)),w!==null&&typeof R=="string"&&(R=w.createHTML(""));ke&&ke(u),hn=u}},qs=N({},[...Zr,...Xr,...ru]),Us=N({},[...Qr,...su]),el=function(u){let _=y(u);(!_||!_.tagName)&&(_={namespaceURI:B,tagName:"template"});const T=yr(u.tagName),Z=yr(_.tagName);return Et[u.namespaceURI]?u.namespaceURI===Ut?_.namespaceURI===qe?T==="svg":_.namespaceURI===pn?T==="svg"&&(Z==="annotation-xml"||Ht[Z]):!!qs[T]:u.namespaceURI===pn?_.namespaceURI===qe?T==="math":_.namespaceURI===Ut?T==="math"&&hr[Z]:!!Us[T]:u.namespaceURI===qe?_.namespaceURI===Ut&&!hr[Z]||_.namespaceURI===pn&&!Ht[Z]?!1:!Us[T]&&(Xa[T]||!qs[T]):!!(Pn==="application/xhtml+xml"&&Et[u.namespaceURI]):!1},Je=function(u){qn(t.removed,{element:u});try{y(u).removeChild(u)}catch{g(u)}},Wt=function(u,_){try{qn(t.removed,{attribute:_.getAttributeNode(u),from:_})}catch{qn(t.removed,{attribute:null,from:_})}if(_.removeAttribute(u),u==="is")if(St||Bt)try{Je(_)}catch{}else try{_.setAttribute(u,"")}catch{}},Hs=function(u){let _=null,T=null;if(cn)u="<remove></remove>"+u;else{const re=Yr(u,/^[\r\n\t ]+/);T=re&&re[0]}Pn==="application/xhtml+xml"&&B===qe&&(u='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+u+"</body></html>");const Z=w?w.createHTML(u):u;if(B===qe)try{_=new d().parseFromString(Z,Pn)}catch{}if(!_||!_.documentElement){_=C.createDocument(B,"template",null);try{_.documentElement.innerHTML=dt?R:Z}catch{}}const pe=_.body||_.documentElement;return u&&T&&pe.insertBefore(n.createTextNode(T),pe.childNodes[0]||null),B===qe?_e.call(_,ut?"html":"body")[0]:ut?_.documentElement:pe},Ws=function(u){return X.call(u.ownerDocument||u,u,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Fr=function(u){return u instanceof p&&(typeof u.nodeName!="string"||typeof u.textContent!="string"||typeof u.removeChild!="function"||!(u.attributes instanceof f)||typeof u.removeAttribute!="function"||typeof u.setAttribute!="function"||typeof u.namespaceURI!="string"||typeof u.insertBefore!="function"||typeof u.hasChildNodes!="function")},Gs=function(u){return typeof o=="function"&&u instanceof o};function pt(A,u,_){mr(A,T=>{T.call(t,u,_,hn)})}const js=function(u){let _=null;if(pt(G.beforeSanitizeElements,u,null),Fr(u))return Je(u),!0;const T=ie(u.nodeName);if(pt(G.uponSanitizeElement,u,{tagName:T,allowedTags:P}),Ft&&u.hasChildNodes()&&!Gs(u.firstElementChild)&&be(/<[/\w!]/g,u.innerHTML)&&be(/<[/\w!]/g,u.textContent)||u.nodeType===Gn.progressingInstruction||Ft&&u.nodeType===Gn.comment&&be(/<[/\w]/g,u.data))return Je(u),!0;if(!(yt.tagCheck instanceof Function&&yt.tagCheck(T))&&(!P[T]||Te[T])){if(!Te[T]&&Ys(T)&&($.tagNameCheck instanceof RegExp&&be($.tagNameCheck,T)||$.tagNameCheck instanceof Function&&$.tagNameCheck(T)))return!1;if(fn&&!Ie[T]){const Z=y(u)||u.parentNode,pe=D(u)||u.childNodes;if(pe&&Z){const re=pe.length;for(let Se=re-1;Se>=0;--Se){const ht=k(pe[Se],!0);ht.__removalCount=(u.__removalCount||0)+1,Z.insertBefore(ht,E(u))}}}return Je(u),!0}return u instanceof l&&!el(u)||(T==="noscript"||T==="noembed"||T==="noframes")&&be(/<\/no(script|embed|frames)/i,u.innerHTML)?(Je(u),!0):(Tt&&u.nodeType===Gn.text&&(_=u.textContent,mr([oe,xe,lt],Z=>{_=Un(_,Z," ")}),u.textContent!==_&&(qn(t.removed,{element:u.cloneNode()}),u.textContent=_)),pt(G.afterSanitizeElements,u,null),!1)},Vs=function(u,_,T){if(ur&&(_==="id"||_==="name")&&(T in n||T in Ja))return!1;if(!(Nn&&!ct[_]&&be(zt,_))){if(!(Cn&&be(on,_))){if(!(yt.attributeCheck instanceof Function&&yt.attributeCheck(_,u))){if(!U[_]||ct[_]){if(!(Ys(u)&&($.tagNameCheck instanceof RegExp&&be($.tagNameCheck,u)||$.tagNameCheck instanceof Function&&$.tagNameCheck(u))&&($.attributeNameCheck instanceof RegExp&&be($.attributeNameCheck,_)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(_,u))||_==="is"&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&be($.tagNameCheck,T)||$.tagNameCheck instanceof Function&&$.tagNameCheck(T))))return!1}else if(!dn[_]){if(!be(se,Un(T,ne,""))){if(!((_==="src"||_==="xlink:href"||_==="href")&&u!=="script"&&Jc(T,"data:")===0&&On[u])){if(!(cr&&!be(Q,Un(T,ne,"")))){if(T)return!1}}}}}}}return!0},Ys=function(u){return u!=="annotation-xml"&&Yr(u,ye)},Zs=function(u){pt(G.beforeSanitizeAttributes,u,null);const{attributes:_}=u;if(!_||Fr(u))return;const T={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let Z=_.length;for(;Z--;){const pe=_[Z],{name:re,namespaceURI:Se,value:ht}=pe,vn=ie(re),Br=ht;let ce=re==="value"?Br:eu(Br);if(T.attrName=vn,T.attrValue=ce,T.keepAttr=!0,T.forceKeepAttr=void 0,pt(G.uponSanitizeAttribute,u,T),ce=T.attrValue,In&&(vn==="id"||vn==="name")&&(Wt(re,u),ce=fr+ce),Ft&&be(/((--!?|])>)|<\/(style|title|textarea)/i,ce)){Wt(re,u);continue}if(vn==="attributename"&&Yr(ce,"href")){Wt(re,u);continue}if(T.forceKeepAttr)continue;if(!T.keepAttr){Wt(re,u);continue}if(!Mn&&be(/\/>/i,ce)){Wt(re,u);continue}Tt&&mr([oe,xe,lt],Qs=>{ce=Un(ce,Qs," ")});const Xs=ie(u.nodeName);if(!Vs(Xs,vn,ce)){Wt(re,u);continue}if(w&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!Se)switch(v.getAttributeType(Xs,vn)){case"TrustedHTML":{ce=w.createHTML(ce);break}case"TrustedScriptURL":{ce=w.createScriptURL(ce);break}}if(ce!==Br)try{Se?u.setAttributeNS(Se,re,ce):u.setAttribute(re,ce),Fr(u)?Je(u):Ri(t.removed)}catch{Wt(re,u)}}pt(G.afterSanitizeAttributes,u,null)},tl=function A(u){let _=null;const T=Ws(u);for(pt(G.beforeSanitizeShadowDOM,u,null);_=T.nextNode();)pt(G.uponSanitizeShadowNode,_,null),js(_),Zs(_),_.content instanceof i&&A(_.content);pt(G.afterSanitizeShadowDOM,u,null)};return t.sanitize=function(A){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=null,T=null,Z=null,pe=null;if(dt=!A,dt&&(A="<!-->"),typeof A!="string"&&!Gs(A))if(typeof A.toString=="function"){if(A=A.toString(),typeof A!="string")throw Hn("dirty is not a string, aborting")}else throw Hn("toString is not a function");if(!t.isSupported)return A;if(Dn||zr(u),t.removed=[],typeof A=="string"&&(qt=!1),qt){if(A.nodeName){const ht=ie(A.nodeName);if(!P[ht]||Te[ht])throw Hn("root node is forbidden and cannot be sanitized in-place")}}else if(A instanceof o)_=Hs("<!---->"),T=_.ownerDocument.importNode(A,!0),T.nodeType===Gn.element&&T.nodeName==="BODY"||T.nodeName==="HTML"?_=T:_.appendChild(T);else{if(!St&&!Tt&&!ut&&A.indexOf("<")===-1)return w&&un?w.createHTML(A):A;if(_=Hs(A),!_)return St?null:un?R:""}_&&cn&&Je(_.firstChild);const re=Ws(qt?A:_);for(;Z=re.nextNode();)js(Z),Zs(Z),Z.content instanceof i&&tl(Z.content);if(qt)return A;if(St){if(Bt)for(pe=W.call(_.ownerDocument);_.firstChild;)pe.appendChild(_.firstChild);else pe=_;return(U.shadowroot||U.shadowrootmode)&&(pe=j.call(s,pe,!0)),pe}let Se=ut?_.outerHTML:_.innerHTML;return ut&&P["!doctype"]&&_.ownerDocument&&_.ownerDocument.doctype&&_.ownerDocument.doctype.name&&be(Ya,_.ownerDocument.doctype.name)&&(Se="<!DOCTYPE "+_.ownerDocument.doctype.name+`>
`+Se),Tt&&mr([oe,xe,lt],ht=>{Se=Un(Se,ht," ")}),w&&un?w.createHTML(Se):Se},t.setConfig=function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};zr(A),Dn=!0},t.clearConfig=function(){hn=null,Dn=!1},t.isValidAttribute=function(A,u,_){hn||zr({});const T=ie(A),Z=ie(u);return Vs(T,Z,_)},t.addHook=function(A,u){typeof u=="function"&&qn(G[A],u)},t.removeHook=function(A,u){if(u!==void 0){const _=Qc(G[A],u);return _===-1?void 0:Kc(G[A],_,1)[0]}return Ri(G[A])},t.removeHooks=function(A){G[A]=[]},t.removeAllHooks=function(){G=Li()},t}var vu=Za(),gu=O('<div class="empty-state svelte-1o2fbmr"><div class="jarvis-logo svelte-1o2fbmr"><svg viewBox="0 0 100 100" fill="none" class="svelte-1o2fbmr"><circle cx="50" cy="50" r="45" stroke="url(#grad1)" stroke-width="2" opacity="0.3" class="svelte-1o2fbmr"></circle><circle cx="50" cy="50" r="35" stroke="url(#grad1)" stroke-width="2" opacity="0.5" class="svelte-1o2fbmr"></circle><circle cx="50" cy="50" r="25" stroke="url(#grad1)" stroke-width="2" opacity="0.7" class="svelte-1o2fbmr"></circle><circle cx="50" cy="50" r="8" fill="url(#grad1)" class="svelte-1o2fbmr"></circle><defs class="svelte-1o2fbmr"><linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%" class="svelte-1o2fbmr"><stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" class="svelte-1o2fbmr"></stop><stop offset="100%" style="stop-color:#60a5fa;stop-opacity:1" class="svelte-1o2fbmr"></stop></linearGradient></defs></svg></div> <h2 class="svelte-1o2fbmr">Jarvis Voice Assistant</h2> <p class="svelte-1o2fbmr">Press the microphone button to start a conversation</p></div>'),_u=O('<details class="reasoning svelte-1o2fbmr"><summary class="svelte-1o2fbmr">Reasoning</summary> <pre class="svelte-1o2fbmr"> </pre></details>'),bu=O('<div><div class="message-content svelte-1o2fbmr"><!> <div class="markdown svelte-1o2fbmr"><!></div></div></div>'),mu=O('<details class="reasoning svelte-1o2fbmr" open=""><summary class="svelte-1o2fbmr">Reasoning</summary> <pre class="svelte-1o2fbmr"> </pre></details>'),ku=O('<div class="message assistant streaming svelte-1o2fbmr"><div class="message-content svelte-1o2fbmr"><!> <div class="markdown streaming svelte-1o2fbmr"><!><span class="cursor svelte-1o2fbmr">â</span></div></div></div>'),wu=O('<div class="messages svelte-1o2fbmr"><!> <!></div>'),xu=O('<div class="response-container svelte-1o2fbmr"><!></div>');function yu(e,t){st(t,!1);const n=()=>Qe(Ue,"$conversation",s),[s,r]=$t(),i=te();let a=te(),o=!0;mo(()=>{o&&m(a)&&Ul(a,m(a).scrollTop=m(a).scrollHeight)});function l(h){const k=H.parse(h||"",{breaks:!0});return vu.sanitize(k)}function c(){if(!m(a))return;o=m(a).scrollHeight-m(a).scrollTop-m(a).clientHeight<50}ve(()=>n(),()=>{q(i,n().messages.length>0||n().currentResponse)}),an(),xt();var f=xu(),p=b(f);{var d=h=>{var k=gu();M(h,k)},v=h=>{var k=wu(),g=b(k);rr(g,1,()=>(n(),S(()=>n().messages)),y=>y.id,(y,w)=>{var R=bu();let C;var X=b(R),W=b(X);{var _e=oe=>{var xe=_u(),lt=x(b(xe),2),zt=b(lt);J(()=>Y(zt,(m(w),S(()=>m(w).reasoning)))),M(oe,xe)};ge(W,oe=>{m(w),S(()=>m(w).reasoning)&&oe(_e)})}var j=x(W,2),G=b(j);ci(G,()=>(m(w),S(()=>l(m(w).content)))),J(()=>C=kt(R,1,"message svelte-1o2fbmr",null,C,{user:m(w).role==="user",assistant:m(w).role==="assistant"})),M(y,R)});var E=x(g,2);{var D=y=>{var w=ku(),R=b(w),C=b(R);{var X=j=>{var G=mu(),oe=x(b(G),2),xe=b(oe);J(()=>Y(xe,(n(),S(()=>n().currentReasoning)))),M(j,G)};ge(C,j=>{n(),S(()=>n().currentReasoning)&&j(X)})}var W=x(C,2),_e=b(W);ci(_e,()=>(n(),S(()=>l(n().currentResponse)))),M(y,w)};ge(E,y=>{n(),S(()=>n().currentResponse)&&y(D)})}M(h,k)};ge(p,h=>{m(i)?h(v,!1):h(d)})}Lo(f,h=>q(a,h),()=>m(a)),We("scroll",f,c),M(e,f),it(),r()}var Tu=O('<div class="bar svelte-1xexgqq"></div>'),Su=O('<div><div class="bars svelte-1xexgqq"></div></div>');function Eu(e,t){st(t,!1);const n=()=>Qe(K,"$audio",s),[s,r]=$t(),i=te(),a=te();ve(()=>n(),()=>{q(i,n().audioLevel)}),ve(()=>n(),()=>{q(a,n().isVadActive)}),an(),xt();var o=Su();let l;var c=b(o);rr(c,4,()=>Array(32),Rs,(f,p,d)=>{var v=Tu();let h;J(k=>h=Cs(v,`height: ${k??""}%`,h,{"animation-delay":`${d*.05}s`}),[()=>(m(i),S(()=>Math.max(2,m(i)/100*80*(.5+Math.random()*.5))))]),M(f,v)}),J(()=>l=kt(o,1,"visualizer svelte-1xexgqq",null,l,{active:m(a)})),M(e,o),it(),r()}var Au=O('<div class="wakeword-flash svelte-1ubt6i6"></div>'),Ru=O('<div class="processing-spinner svelte-1ubt6i6"></div>'),Cu=fo('<svg class="mic-icon svelte-1ubt6i6" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" class="svelte-1ubt6i6"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2" class="svelte-1ubt6i6"></path><line x1="12" y1="19" x2="12" y2="23" class="svelte-1ubt6i6"></line><line x1="8" y1="23" x2="16" y2="23" class="svelte-1ubt6i6"></line></svg>'),Nu=O('<div class="pulse-ring svelte-1ubt6i6"></div> <div class="pulse-ring delay svelte-1ubt6i6"></div>',1),Mu=O('<button><!> <div class="icon-wrapper svelte-1ubt6i6"><!></div> <!></button>');function Du(e,t){st(t,!1);const n=()=>Qe(K,"$audio",s),[s,r]=$t(),i=te(),a=te(),o=te(),l=te();function c(){n().streaming?Er.stop():Er.start()}ve(()=>n(),()=>{q(i,n().micState==="listening"||n().wakewordActive)}),ve(()=>n(),()=>{q(a,n().micState==="processing")}),ve(()=>m(a),()=>{q(o,m(a))}),ve(()=>n(),()=>{q(l,n().streaming)}),an(),xt();var f=Mu();let p;var d=b(f);wo(d,()=>(n(),S(()=>n().wakewordPulse)),y=>{var w=Au();M(y,w)});var v=x(d,2),h=b(v);{var k=y=>{var w=Ru();M(y,w)},g=y=>{var w=Cu();M(y,w)};ge(h,y=>{m(a)?y(k):y(g,!1)})}var E=x(v,2);{var D=y=>{var w=Nu();M(y,w)};ge(E,y=>{m(i)&&y(D)})}J(()=>{p=kt(f,1,"voice-button svelte-1ubt6i6",null,p,{listening:m(i),processing:m(a),armed:n().wakewordActive,streaming:m(l)}),f.disabled=m(o),Do(f,"aria-label",m(l)?"Stop microphone":"Start microphone")}),We("click",f,c),M(e,f),it(),r()}var Iu=O('<p class="text svelte-1qxeroi"> </p>'),Lu=O('<p class="placeholder svelte-1qxeroi">Listeningâ¦</p>'),Ou=O('<p class="placeholder idle svelte-1qxeroi">Awaiting voice inputâ¦</p>'),Pu=O("<div><!></div>");function $u(e,t){st(t,!1);const n=()=>Qe(K,"$audio",s),[s,r]=$t(),i=te(),a=te();ve(()=>n(),()=>{q(i,n().currentTranscription||"")}),ve(()=>n(),()=>{q(a,n().micState==="listening")}),an(),xt();var o=Pu();let l;var c=b(o);{var f=v=>{var h=Iu(),k=b(h);J(()=>Y(k,m(i))),M(v,h)},p=v=>{var h=Lu();M(v,h)},d=v=>{var h=Ou();M(v,h)};ge(c,v=>{m(i)?v(f):m(a)?v(p,1):v(d,!1)})}J(()=>l=kt(o,1,"transcription svelte-1qxeroi",null,l,{listening:m(a)})),M(e,o),it(),r()}var zu=O('<span class="queued svelte-bjtbng">QUEUED</span>'),Fu=O('<div class="draft-body svelte-bjtbng"> </div>'),Bu=O('<div class="draft-empty svelte-bjtbng">No buffered task yet. Tell proxy what to draft.</div>'),qu=O('<div class="dispatch svelte-bjtbng"> </div>'),Uu=O('<section><header class="svelte-bjtbng"><h3 class="svelte-bjtbng">Queued Task / Scratchpad</h3> <div class="badges svelte-bjtbng"><span class="state svelte-bjtbng"> </span> <!></div></header> <!> <!></section>');function Hu(e,t){st(t,!1);const n=()=>Qe(he,"$agentPanel",r),s=()=>Qe(Ue,"$conversation",r),[r,i]=$t();xt();var a=Uu();let o;var l=b(a),c=x(b(l),2),f=b(c),p=b(f),d=x(f,2);{var v=y=>{var w=zu();M(y,w)};ge(d,y=>{n().queuedTask&&y(v)})}var h=x(l,2);{var k=y=>{var w=Fu(),R=b(w);J(()=>Y(R,s().taskDraft)),M(y,w)},g=y=>{var w=Bu();M(y,w)};ge(h,y=>{s().taskDraft?y(k):y(g,!1)})}var E=x(h,2);{var D=y=>{var w=qu(),R=b(w);J(()=>Y(R,`Auto-send in ${n().dispatchCountdown??""}s (if agent remains idle)`)),M(y,w)};ge(E,y=>{n().dispatchCountdown!==null&&y(D)})}J(()=>{o=kt(a,1,"task-draft svelte-bjtbng",null,o,{armed:!!n().queuedTask}),Y(p,s().taskDraft?"BUFFERED":"EMPTY")}),M(e,a),it(),i()}var Wu=O('<div class="tool-pill svelte-1pino47"><span class="dot svelte-1pino47"></span> <span class="svelte-1pino47"> </span></div>'),Gu=O('<div class="countdown svelte-1pino47"> </div>'),ju=O('<div class="queue-card svelte-1pino47"><div class="queue-title svelte-1pino47">Queued task</div> <div class="queue-task svelte-1pino47"> </div> <!></div>'),Vu=O('<pre class="svelte-1pino47"> </pre>'),Yu=O('<p class="svelte-1pino47"> </p>'),Zu=O('<div class="rich svelte-1pino47"></div>'),Xu=O('<section class="agent-monitor svelte-1pino47"><header class="svelte-1pino47"><h3 class="svelte-1pino47">Main Agent</h3> <div class="head-right svelte-1pino47"><span> </span> <span> </span></div></header> <div class="ctx-meta svelte-1pino47"> </div> <div><div class="pulse svelte-1pino47"></div> <div class="svelte-1pino47"><div class="now-label svelte-1pino47">Now</div> <div class="now-title svelte-1pino47"> </div> <div class="now-sub svelte-1pino47"> </div></div></div> <div class="tool-strip svelte-1pino47"></div> <!> <!></section>');function Qu(e,t){st(t,!1);const n=()=>Qe(he,"$agentPanel",s),[s,r]=$t(),i=te(),a=te(),o=te(),l={busy:"Working",idle:"Idle"};function c(Q){if(!Q)return[];const ne=[],ye=/```[\w-]*\n([\s\S]*?)```/g;let se=0,P;for(;(P=ye.exec(Q))!==null;){const U=Q.slice(se,P.index).trim();U&&ne.push({kind:"text",value:U}),ne.push({kind:"code",value:P[1].trim()}),se=ye.lastIndex}const Be=Q.slice(se).trim();return Be&&ne.push({kind:"text",value:Be}),ne.length?ne:[{kind:"text",value:Q}]}ve(()=>n(),()=>{q(i,n().progressFeed[n().progressFeed.length-1])}),ve(()=>(m(i),n()),()=>{q(a,m(i)?.state||n().status||"idle")}),ve(()=>(m(i),n()),()=>{q(o,m(i)?.title||n().currentTask||"Awaiting next run")}),an(),xt();var f=Xu(),p=b(f),d=x(b(p),2),v=b(d);let h;var k=b(v),g=x(v,2);let E;var D=b(g),y=x(p,2),w=b(y),R=x(y,2);let C;var X=x(b(R),2),W=x(b(X),2),_e=b(W),j=x(W,2),G=b(j),oe=x(R,2);rr(oe,5,()=>(n(),S(()=>n().toolEvents)),Q=>Q.id,(Q,ne)=>{var ye=Wu(),se=x(b(ye),2),P=b(se);J(()=>Y(P,(m(ne),S(()=>m(ne).tool)))),M(Q,ye)});var xe=x(oe,2);{var lt=Q=>{var ne=ju(),ye=x(b(ne),2),se=b(ye),P=x(ye,2);{var Be=U=>{var ot=Gu(),$=b(ot);J(()=>Y($,`Sending in ${n(),S(()=>n().dispatchCountdown)??""}s`)),M(U,ot)};ge(P,U=>{n(),S(()=>n().dispatchCountdown!==null)&&U(Be)})}J(()=>Y(se,(n(),S(()=>n().queuedTask)))),M(Q,ne)};ge(xe,Q=>{n(),S(()=>n().queuedTask)&&Q(lt)})}var zt=x(xe,2);{var on=Q=>{var ne=Zu();rr(ne,5,()=>(m(i),S(()=>c(m(i).content))),Rs,(ye,se)=>{var P=Sa(),Be=oa(P);{var U=$=>{var Te=Vu(),ct=b(Te);J(()=>Y(ct,(m(se),S(()=>m(se).value)))),M($,Te)},ot=$=>{var Te=Yu(),ct=b(Te);J(()=>Y(ct,(m(se),S(()=>m(se).value)))),M($,Te)};ge(Be,$=>{m(se),S(()=>m(se).kind==="code")?$(U):$(ot,!1)})}M(ye,P)}),M(Q,ne)};ge(zt,Q=>{m(i),S(()=>m(i)?.content)&&Q(on)})}J(Q=>{Cs(f,(n(),S(()=>`--pulse-token:${n().pulseToken}`))),h=kt(v,1,"bridge svelte-1pino47",null,h,{on:n().bridgeConfigured}),Y(k,(n(),S(()=>n().bridgeConfigured?n().dispatchEnabled?"live":"linked-safe":"mock/offline"))),E=kt(g,1,"badge svelte-1pino47",null,E,{busy:n().status==="busy"}),Y(D,(n(),S(()=>l[n().status]||n().status))),Y(w,`ctx ${n(),S(()=>n().contextMessages)??""} msgs Â· ${Q??""}k chars`),C=kt(R,1,"now-card svelte-1pino47",null,C,{active:n().status==="busy"}),Y(_e,m(o)),Y(G,`State: ${m(a)??""}`)},[()=>(n(),S(()=>Math.max(1,Math.round(n().contextChars/1e3))))]),M(e,f),it(),r()}var Ku=O("<option> </option>"),Ju=O('<div class="settings-overlay svelte-d580bl" role="dialog" aria-modal="true" aria-labelledby="settings-title" tabindex="-1"><div class="settings-panel svelte-d580bl"><div class="panel-header svelte-d580bl"><h2 id="settings-title" class="svelte-d580bl">Settings</h2> <button class="close-button svelte-d580bl" aria-label="Close settings"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" class="svelte-d580bl"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="panel-content svelte-d580bl"><div class="setting-group svelte-d580bl"><label for="stt-backend" class="svelte-d580bl">Speech Recognition Backend</label> <select id="stt-backend" class="svelte-d580bl"></select> <p class="hint svelte-d580bl">Choose the speech-to-text model. Smaller models are faster but less accurate.</p></div> <div class="setting-group svelte-d580bl"><label class="toggle-label svelte-d580bl"><input type="checkbox" class="svelte-d580bl"/> <span class="svelte-d580bl">Enable Text-to-Speech</span></label> <p class="hint svelte-d580bl">Play audio responses from the assistant.</p></div> <div class="setting-group svelte-d580bl"><label for="vad-threshold" class="svelte-d580bl">Voice Activity Detection Threshold</label> <div class="slider-group svelte-d580bl"><input id="vad-threshold" type="range" min="0" max="1" step="0.05" class="svelte-d580bl"/> <span class="slider-value svelte-d580bl"> </span></div> <p class="hint svelte-d580bl">Adjust sensitivity for detecting speech. Lower values are more sensitive.</p></div> <div class="setting-group svelte-d580bl"><label for="silence-duration" class="svelte-d580bl">Silence End Duration (ms)</label> <div class="slider-group svelte-d580bl"><input id="silence-duration" type="range" min="400" max="2000" step="50" class="svelte-d580bl"/> <span class="slider-value svelte-d580bl"> </span></div> <p class="hint svelte-d580bl">How long silence must last before a turn ends (server VAD).</p></div> <div class="setting-group svelte-d580bl"><label class="toggle-label svelte-d580bl"><input type="checkbox" class="svelte-d580bl"/> <span class="svelte-d580bl">Auto-send on silence</span></label> <p class="hint svelte-d580bl">Turn handling is voice-first; silence triggers processing.</p></div> <div class="setting-group svelte-d580bl"><label class="toggle-label svelte-d580bl"><input type="checkbox" class="svelte-d580bl"/> <span class="svelte-d580bl">Wakeword activation (Hey Jarvis)</span></label> <p class="hint svelte-d580bl">Requires "hey jarvis" before processing speech.</p></div> <div class="setting-group svelte-d580bl"><label for="wakeword-threshold" class="svelte-d580bl">Wakeword Threshold</label> <div class="slider-group svelte-d580bl"><input id="wakeword-threshold" type="range" min="0.2" max="0.9" step="0.05" class="svelte-d580bl"/> <span class="slider-value svelte-d580bl"> </span></div> <p class="hint svelte-d580bl">Higher = stricter wakeword detection.</p></div> <div class="setting-group svelte-d580bl"><label for="wakeword-window" class="svelte-d580bl">Wakeword Idle Timeout (ms)</label> <div class="slider-group svelte-d580bl"><input id="wakeword-window" type="range" min="5000" max="30000" step="500" class="svelte-d580bl"/> <span class="slider-value svelte-d580bl"> </span></div> <p class="hint svelte-d580bl">How long before returning to idle after no speech is detected.</p></div> <div class="setting-group svelte-d580bl"><label for="bridge-session" class="svelte-d580bl">Agent Bridge Session</label> <div class="bridge-row svelte-d580bl"><input id="bridge-session" type="text" placeholder="OpenClaw session id" class="svelte-d580bl"/> <button class="mini-btn svelte-d580bl">Bind</button></div> <p class="hint svelte-d580bl"> </p> <div class="bridge-row svelte-d580bl" style="margin-top:8px;"><button class="mini-btn svelte-d580bl">Bind Main Session</button> <label class="toggle-label compact svelte-d580bl"><input type="checkbox" class="svelte-d580bl"/> <span class="svelte-d580bl">Live dispatch</span></label></div></div> <div class="setting-group svelte-d580bl"><p class="group-title svelte-d580bl">Mock Agent Flow</p> <div class="bridge-row svelte-d580bl"><button class="mini-btn svelte-d580bl">Start mock</button> <button class="mini-btn danger svelte-d580bl">Stop mock</button></div> <p class="hint svelte-d580bl">Use this when real bridge is unavailable.</p></div></div></div></div>');function ef(e,t){st(t,!1);const n=()=>Qe(Ee,"$settings",s),[s,r]=$t(),i=["moonshine-tiny","moonshine-base","whisper-tiny","whisper-small","whisper-medium"];let a=te(""),o=te(!1),l=te(!1);async function c(){try{const C=await(await fetch("/api/bridge/status")).json();q(a,C.session_id||""),q(o,!!C.configured),q(l,!!C.dispatch_enabled)}catch{}}async function f(){await fetch("/api/bridge/bind",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:m(a).trim(),dispatch_enabled:m(l)})}),await c()}async function p(){await fetch("/api/bridge/bind-main",{method:"POST"}),await c()}async function d(R){q(l,R),await fetch("/api/bridge/dispatch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:R})}),await c()}async function v(){await fetch("/api/mock-agent/start",{method:"POST"})}async function h(){await fetch("/api/mock-agent/stop",{method:"POST"})}function k(){Ee.update(R=>({...R,showSettings:!1}))}function g(R){R.target===R.currentTarget&&k()}function E(R){R.key==="Escape"&&k()}ve(()=>n(),()=>{n().showSettings&&c()}),an(),xt();var D=Sa(),y=oa(D);{var w=R=>{var C=Ju(),X=b(C),W=b(X),_e=x(b(W),2),j=x(W,2),G=b(j),oe=x(b(G),2);rr(oe,5,()=>i,Rs,(B,dt)=>{var Et=Ku(),$r=b(Et),Ht={};J(()=>{Y($r,m(dt)),Ht!==(Ht=m(dt))&&(Et.value=(Et.__value=m(dt))??"")}),M(B,Et)});var xe=x(G,2),lt=b(xe),zt=b(lt),on=x(xe,2),Q=x(b(on),2),ne=b(Q),ye=x(ne,2),se=b(ye),P=x(on,2),Be=x(b(P),2),U=b(Be),ot=x(U,2),$=b(ot),Te=x(P,2),ct=b(Te),yt=b(ct),Cn=x(Te,2),Nn=b(Cn),cr=b(Nn),Mn=x(Cn,2),Tt=x(b(Mn),2),Ft=b(Tt),ut=x(Ft,2),Dn=b(ut),cn=x(Mn,2),St=x(b(cn),2),Bt=b(St),un=x(Bt,2),ur=b(un),In=x(cn,2),fr=x(b(In),2),fn=b(fr),qt=x(fn,2),ft=x(fr,2),Ie=b(ft),Ln=x(ft,2),On=b(Ln),dr=x(On,2),dn=b(dr),pr=x(In,2),pn=x(b(pr),2),Ut=b(pn),qe=x(Ut,2);J((B,dt)=>{Y(se,`${B??""}%`),Y($,(n(),S(()=>n().silenceDurationMs))),Y(Dn,`${dt??""}%`),Y(ur,(n(),S(()=>n().wakewordActiveWindowMs))),Y(Ie,`Status: ${m(o)?"connected":"not bound"} Â· dispatch ${m(l)?"on":"safe/off"}`),Mo(dn,m(l))},[()=>(n(),S(()=>Math.round(n().vadThreshold*100))),()=>(n(),S(()=>Math.round(n().wakewordThreshold*100)))]),We("click",_e,k),Ro(oe,()=>n().sttBackend,B=>(Nt(Ee,S(n).sttBackend=B,S(n)),Rt(()=>{}))),Hr(zt,()=>n().ttsEnabled,B=>(Nt(Ee,S(n).ttsEnabled=B,S(n)),Rt(()=>{}))),zn(ne,()=>n().vadThreshold,B=>(Nt(Ee,S(n).vadThreshold=B,S(n)),Rt(()=>{}))),zn(U,()=>n().silenceDurationMs,B=>(Nt(Ee,S(n).silenceDurationMs=B,S(n)),Rt(()=>{}))),Hr(yt,()=>n().autoSend,B=>(Nt(Ee,S(n).autoSend=B,S(n)),Rt(()=>{}))),Hr(cr,()=>n().wakewordEnabled,B=>(Nt(Ee,S(n).wakewordEnabled=B,S(n)),Rt(()=>{}))),zn(Ft,()=>n().wakewordThreshold,B=>(Nt(Ee,S(n).wakewordThreshold=B,S(n)),Rt(()=>{}))),zn(Bt,()=>n().wakewordActiveWindowMs,B=>(Nt(Ee,S(n).wakewordActiveWindowMs=B,S(n)),Rt(()=>{}))),zn(fn,()=>m(a),B=>q(a,B)),We("click",qt,f),We("click",On,p),We("change",dn,B=>d(B.currentTarget.checked)),We("click",Ut,v),We("click",qe,h),We("click",C,g),We("keydown",C,E),M(R,C)};ge(y,R=>{n(),S(()=>n().showSettings)&&R(w)})}M(e,D),it(),r()}var tf=O('<main class="app svelte-1n46o8q"><!> <section class="hud svelte-1n46o8q"><section class="left-stage svelte-1n46o8q"><div class="chat-shell svelte-1n46o8q"><!></div> <div class="dock svelte-1n46o8q"><!> <div class="viz-wrap svelte-1n46o8q"><!></div></div> <div class="caption-slot svelte-1n46o8q"><!></div></section> <section class="right-stage svelte-1n46o8q"><div class="hero scratchpad-hero svelte-1n46o8q"><!></div> <div class="hero agent-hero svelte-1n46o8q"><!></div></section></section> <!></main>');function nf(e,t){st(t,!1),Aa(()=>Da()),bo(()=>tc()),xt();var n=tf(),s=b(n);sc(s,{});var r=x(s,2),i=b(r),a=b(i),o=b(a);yu(o,{});var l=x(a,2),c=b(l);Du(c,{});var f=x(c,2),p=b(f);Eu(p,{});var d=x(l,2),v=b(d);$u(v,{});var h=x(i,2),k=b(h),g=b(k);Hu(g,{});var E=x(k,2),D=b(E);Qu(D,{});var y=x(r,2);ef(y,{}),M(e,n),it()}vo(nf,{target:document.getElementById("app")});
